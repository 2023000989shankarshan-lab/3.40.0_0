"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[6081],{68334:(e,t,n)=>{n.d(t,{d:()=>v});var r=n(33998),o=n(34900),a=n(22155),i=n(30395),s=n.n(i);const l="_5r2X27zKbL3K-0KuztabLA==",c="_9VJTarzDvJAPMOKQbzHeEQ==",u="+hRUmPa5hVn8ncwI9jw3WQ==",d="D5NR++a7+cgnxCM1YywMSg==";var p=["className","labelClassName","inputId","name","checked","children","onToggle","compact","defaultTypo","disabled"],m=a.createElement;function f(e,t){var n=e.className,a=e.labelClassName,i=e.inputId,f=e.name,v=e.checked,b=e.children,y=e.onToggle,h=e.compact,g=void 0===h||h,w=e.defaultTypo,P=void 0===w||w,x=e.disabled,S=(0,o.A)(e,p);return m("label",{className:s()(n,"group relative flex items-center",x?"pointer-events-none cursor-not-allowed opacity-32":"cursor-pointer",u),htmlFor:i,ref:t},m("input",(0,r.A)({},S,{disabled:x,id:i,name:f,type:"checkbox",checked:v,onChange:y,className:"absolute h-0 w-0 opacity-0"})),m("span",{className:s()("relative block",g?"h-4 w-8":"h-5 w-10")},m("span",{className:s()("absolute bottom-0 left-0 top-0 my-auto w-full bg-theme-overlay-quaternary",g?"h-2.5 rounded-3":"h-3 rounded-4",l)}),m("span",{className:s()("absolute left-0 top-0 bg-text-tertiary",g?"h-4 w-4 rounded-3":"h-5 w-5 rounded-6",c)})),b&&m("span",{className:s()("ml-3 font-bold text-text-tertiary",P&&"typo-footnote",d,a)},b))}var v=a.forwardRef(f)},92339:(e,t,n)=>{n.r(t),n.d(t,{CreateSharedPostModal:()=>j,default:()=>A});var r=n(33998),o=n(56594),a=n(34900),i=n(22155),s=n(94198),l=n(24481),c=n(63606),u=n(92975),d=n(78515),p=n(53823),m=n(83448),f=n(19505),v=n(99277),b=n(52303),y=n(16714),h=n(58392),g=n(17398),w=n(10663),P=n(57434),x=n(68334),S=n(38638),O=["preview","squad","onSharedSuccessfully","onRequestClose"],k=i.createElement;function j(e){var t,n,j,A=e.preview,N=e.squad,F=e.onSharedSuccessfully,D=e.onRequestClose,E=(0,a.A)(e,O),C=(0,i.useRef)(),I=(0,i.useState)(null!==(t=null!==(n=null==A?void 0:A.permalink)&&void 0!==n?n:null==A?void 0:A.url)&&void 0!==t?t:""),L=I[0],M=I[1],T=(0,P.$)(),z=T.shouldShowCta,R=T.isEnabled,_=T.onToggle,q=T.onSubmitted,U=function(){null==F||F(),q(),D(null)},X=(0,d.h)({initialPreview:A,onPostSuccess:U,onSourcePostModerationSuccess:U}),Y=X.getLinkPreview,K=X.isLoadingPreview,$=X.preview,G=X.isPosting,W=X.onSubmitPost,H=[null==$?void 0:$.url,null==$?void 0:$.permalink],J=(0,w.U)(Y,(function(e){return H.every((function(t){return t!==e}))})),Q=(0,o.A)(J,1)[0],B=k(i.Fragment,null,k(p.$n,{icon:k(v.X,null),size:m.Mp.Small,variant:m.Ak.Tertiary,onClick:null==C||null===(j=C.current)||void 0===j?void 0:j.onMentionCommand}),k(b.c,{vertical:!0}),k(h.A,{source:N,size:S.Ov.Small}),k("span",{className:"-ml-1 flex-1"},k("strong",null,N.name),k("span",{className:"ml-1 text-text-tertiary"},"@",N.handle))),V={color:f.h.Cabbage,variant:m.Ak.Primary,disabled:G,loading:G};return k(s.aF,(0,r.A)({kind:s.aF.Kind.FlexibleCenter,size:s.aF.Size.Medium,onRequestClose:D},E,{formProps:{form:"share_post",title:"New post",rightButtonProps:V,copy:{right:"Post"}}}),k(s.aF.Header,{title:"New post"}),k("form",{className:"flex w-full flex-col p-3",action:"#",onSubmit:function(e){e.preventDefault();var t=(0,g.Y)(e.currentTarget).commentary;return W(e,N,t)},id:"share_post"},k(l.A,{ref:C,showUserAvatar:!0,textareaProps:{rows:5,name:"commentary"},sourceId:null==N?void 0:N.id,allowPreview:!1,enabledCommand:{mention:!0},footer:K?k(c.j,{link:L,className:"m-3 flex-col-reverse"}):k(u.A,{className:"m-3 !w-auto flex-col-reverse",preview:null!=$?$:A,link:L,onLinkChange:function(e){var t=e.currentTarget.value;M(t),Q(t)},variant:"modal"})}),z&&k(x.d,{"data-testid":"push_notification-switch",inputId:"push_notification-switch",name:"push_notification",labelClassName:"flex-1 font-normal",className:"py-3",compact:!1,checked:R,onToggle:_},"Receive updates whenever your Squad members engage with your post")),k("span",{className:"flex flex-row items-center gap-2 px-4 tablet:hidden"},B),k(s.aF.Footer,{className:"typo-caption1",justify:y.F1.Start},B,k(p.$n,(0,r.A)({},V,{className:"ml-auto",form:"share_post"}),"Post")))}const A=j},92975:(e,t,n)=>{n.d(t,{A:()=>S});var r=n(22155),o=n(30395),a=n.n(o),i=n(43660),s=n(26540),l=n(35953),c=n(69069),u=n(41536),d=n(75737),p=n(53823),m=n(83448),f=n(38638),v=n(67380),b=n(87822),y=n(95974),h=n(54883),g=n(81565),w=n(9895),P=n(63952),x=r.createElement;function S(e){var t,n,o,S=e.link,O=e.preview,k=e.onLinkChange,j=e.className,A=e.isMinimized,N=e.showPreviewLink,F=void 0===N||N,D=e.variant,E=void 0===D?"default":D;return x(r.Fragment,null,x(d.rA,{className:j},F&&x(i.A,{leftIcon:x(s.q,null),label:"URL",type:"url",name:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:S,onInput:k}),O.title&&O.image&&x(d.rP,{className:A&&"!px-3 !py-2"},x("div",{className:"flex flex-1 flex-col typo-footnote"},x("span",{className:"line-clamp-2 font-bold"},O.title),"unknown"!==(null===(t=O.source)||void 0===t?void 0:t.id)&&(A?x(c.J,{size:f.Ov.Small,source:O.source,className:"absolute right-24 mr-4 mt-1"}):x("span",{className:"mt-1 flex flex-row items-center"},x(c.J,{size:f.Ov.Small,source:O.source}),x("span",{className:"text-text-tertiary"},null===(n=O.source)||void 0===n?void 0:n.name)))),x(u._V,{className:d.Gs,src:O.image,alt:"".concat(O.title)}),!A&&x(p.$n,{icon:x(l.S,null),variant:m.Ak.Tertiary,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:S}))),(null===(o=O.relatedPublicPosts)||void 0===o?void 0:o.length)>0&&x("div",{className:"flex flex-col gap-2 rounded-16 border border-border-subtlest-tertiary bg-surface-float py-4"},x(v.o5,{bold:!0,type:v.kR.Body,className:"px-4"},"This link has already been shared here:"),x("div",{className:a()("flex flex-col gap-2 overflow-x-hidden overflow-y-scroll px-4","modal"===E?"max-h-52 tablet:max-h-28":"max-h-52")},O.relatedPublicPosts.map((function(e){var t,n=(0,b.OR)(e.source);return x("div",{key:e.id,className:"flex items-center gap-4"},n?x(f.Y3,{user:e.author,size:f.Ov.Large,nativeLazyLoading:!0}):x(c.J,{source:e.source,className:"!mr-0"}),x("div",{className:"flex flex-1 flex-col truncate"},x(v.o5,{bold:!0,truncate:!0,type:v.kR.Footnote},null!==(t=e.title)&&void 0!==t?t:O.title),x(v.o5,{truncate:!0,type:v.kR.Footnote,color:v.X8.Tertiary},x(w.o,{date:new Date(e.createdAt),type:g.pT.Post}),x(P.wv,null),n?"@".concat(e.author.username):e.source.name)),x(y.A,{href:"".concat(h.ZO,"posts/").concat(e.id),passHref:!0},x(p.$n,{tag:"a",target:"_blank",className:"ml-auto",variant:m.Ak.Float,size:m.Mp.Small},"View post")))})))))}},63606:(e,t,n)=>{n.d(t,{j:()=>p});var r=n(22155),o=n(43660),a=n(30794),i=n(9062),s=n(35953),l=n(75737),c=n(53823),u=n(83448),d=r.createElement;function p(e){var t=e.link,n=e.className;return d(l.rA,{className:n},d(o.A,{leftIcon:d(a.a,{className:"mr-2"}),label:"URL",type:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:t}),d(l.rP,null,d("span",{className:"absolute left-2 top-2 text-text-quaternary typo-caption1"},"Fetching preview, please hold..."),d("div",{className:"flex flex-1 flex-col typo-footnote"},d("div",{className:"flex-flex-col relative"},d(i._,{className:"h-2 w-5/6 rounded-12"}),d(i._,{className:"mt-3 h-2 w-1/2 rounded-12"}))),d("div",{className:l.Gs}),d(c.$n,{variant:u.Ak.Tertiary,icon:d(s.S,null),disabled:!0,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:t})))}},75737:(e,t,n)=>{n.d(t,{Gs:()=>a,rA:()=>i,rP:()=>s});var r=n(63423),o=n(16714),a="w-28 h-16 rounded-12 bg-text-disabled object-cover",i=(0,r.A)(o.wt,"rounded-16 border border-border-subtlest-tertiary"),s=(0,r.A)(o.Ye,"relative gap-3 items-center py-5 px-4")},7186:(e,t,n)=>{n.d(t,{$d:()=>b,D4:()=>g,Eh:()=>h,jG:()=>w,wF:()=>y});var r=n(21441),o=n(22155),a=n(63423),i=n(67380),s=n(16714),l=n(87822),c=n(25316),u=n(97838),d=n(77955),p=n(48389),m=o.createElement;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.children,n=e.className;return m(i.o5,{className:n,tag:i.UL.H1,type:i.kR.LargeTitle,bold:!0},t)},y=(0,a.A)("span","text-brand-default"),h=((0,a.A)(s.mf,"!p-0 laptop:min-h-page h-full !max-w-[42.5rem] !w-full",s.hC),(0,a.A)("div","flex flex-1 flex-col"),function(e){return(null==e?void 0:e.moderationRequired)&&!(0,p.pZ)(e,l.Wk.ModeratePost)}),g={title:"Your post has been submitted for review",description:"Your post is now waiting for the admin's approval. We'll notify you once it's been reviewed.",okButton:{title:"Got it",className:"tablet:w-full"},cancelButton:null,promptSize:d.rI.XSmall,icon:m(c.x,{size:u.lK.XXXLarge})},w=v(v({},g),{},{title:"Your edit has been submitted for review",description:"Your edit is now waiting for the admin’s approval. We’ll notify you once it’s been reviewed."})},10663:(e,t,n)=>{n.d(t,{U:()=>a});var r=n(34229),o=n(70591),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,r.A)((function(n){return(0,o.U8)(n)&&t(n)?e(n):null}),n)}},57434:(e,t,n)=>{n.d(t,{$:()=>c});var r=n(35001),o=n(13318),a=n.n(o),i=n(22155),s=n(57952),l=n(35393),c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).source,t=void 0===e?s.vH.SquadPostCommentary:e,n=(0,i.useState)(!0),o=n[0],c=n[1],u=(0,l.W)({source:t}),d=u.shouldShowCta,p=u.onEnable,m=u.onDismiss,f=function(){var e=(0,r.A)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return t=o?p:m,e.next=5,t();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=(0,i.useCallback)((function(){return c((function(e){return!e}))}),[]);return{isEnabled:o,onToggle:v,shouldShowCta:d,onSubmitted:f}}},86735:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(35001),o=n(13318),a=n.n(o),i=n(80009),s=n(55059),l=n(27840),c=n(7186);const u=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.onSuccess,u=n.onError,d=n.onSettled,p=n.onMutate,m=(0,l.k)().showPrompt,f=(0,i.n)({mutationFn:s.o8,onSuccess:(e=(0,r.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t.post?c.jG:c.D4);case 2:null==o||o(t);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onError:u,onSettled:d,onMutate:p}),v=f.mutateAsync,b=f.isPending,y=f.isSuccess,h=(0,i.n)({mutationFn:s.$Y,onSuccess:(t=(0,r.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(c.jG);case 2:null==o||o(t);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onError:u,onSettled:d,onMutate:p}),g=h.mutateAsync,w=h.isPending,P=h.isSuccess;return{onCreatePostModeration:v,onUpdatePostModeration:g,isPending:b||w,isSuccess:y||P}}},78515:(e,t,n)=>{n.d(t,{h:()=>S});var r=n(35001),o=n(21441),a=n(13318),i=n.n(a),s=n(5698),l=n(80009),c=n(22155),u=n(55059),d=n(56607),p=n(36899),m=n(68392),f=n(48389),v=n(71623),b=n(80244),y=n(9495),h=n(91201),g=n(86735),w=n(7186);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onPostSuccess,n=e.onMutate,o=e.onError,a=e.onExternalLinkSuccess,P=e.onSourcePostModerationSuccess,S=e.initialPreview,O=(0,m.mu)().displayToast,k=(0,b.Z2)().user,j=(0,s.jE)(),A=(0,y.d)().completeAction,N=(0,c.useState)(S),F=N[0],D=N[1],E=(0,h.D)().requestMethod,C=(0,l.n)({mutationFn:u.pD,onMutate:n,onError:o,onSuccess:t}),I=C.mutateAsync,L=C.isPending,M=C.isSuccess,T=(0,l.n)({mutationFn:u.lD,onMutate:n,onSuccess:t,onError:o}),z=T.mutateAsync,R=T.isPending,_=T.isSuccess,q=(0,l.n)({mutationFn:function(e){return(0,u.e_)(e,E)},onSuccess:function(e,t){var n=x(x({},e),{},{finalUrl:e.url,url:t});D(n),null==a||a(n,t)},onError:function(e){var t,n=(0,p.Pd)(e,p.hD.RateLimited),r=null!==(t=null==n?void 0:n.message)&&void 0!==t?t:p.XW;O(r),null==o||o(e)}}),U=q.mutateAsync,X=q.isPending,Y=(0,g.A)({onSuccess:function(e){A(v.X2.SquadFirstPost),null==P||P(e)},onError:function(){O(p.XW)}}),K=Y.onCreatePostModeration,$=Y.isSuccess,G=Y.isPending,W=(0,c.useCallback)(function(){var e=(0,r.A)(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R&&!_){e.next=2;break}return e.abrupt("return",null);case 2:return(0,w.Eh)(n)?K(x(x({},t),{},{type:d.xj.Freeform,postId:t.id,sourceId:n.id})):z(t),e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[z,K,R,_]),H=function(){var e=(0,r.A)(i().mark((function e(){var t=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(t.length>0&&void 0!==t[0]&&t[0]?"The post has been updated":"This post has been shared to your squad"),e.next=4,j.invalidateQueries({queryKey:["sourceFeed",k.id]});case 4:A(v.X2.SquadFirstPost);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=(0,l.n)({mutationFn:(0,f.DC)(E),onSuccess:function(e){H(),t&&t(e,null==e?void 0:e.permalink)}}),Q=J.mutateAsync,B=J.isPending,V=J.isSuccess,Z=(0,l.n)({mutationFn:(0,f.Qz)(E),onSuccess:function(e){H(!0),t&&t(e,null==e?void 0:e.permalink)}}),ee=Z.mutateAsync,te=Z.isPending,ne=Z.isSuccess,re=(0,l.n)({mutationFn:function(e){return(0,u.w)(e,E)},onSuccess:function(e,n){var r=n.url;H(),t&&t(null,r)}}),oe=re.mutateAsync,ae=re.isPending,ie=re.isSuccess,se=B||ae||G||R||L,le=ne||te||G,ce=$||V||ie||M||_,ue=(0,c.useCallback)((function(e,t,n){var r;if(null==e||e.preventDefault(),se)return null;if(F.id)return(0,w.Eh)(t)?K({type:d.xj.Share,sourceId:t.id,sharedPostId:F.id,title:n}):Q({id:F.id,sourceId:t.id,commentary:n});var o=F.title,a=F.image,i=null!==(r=F.finalUrl)&&void 0!==r?r:F.url;return o?(0,w.Eh)(t)?K({externalLink:i,title:o,imageUrl:a,type:d.xj.Share,sourceId:t.id,content:n}):oe({url:i,title:o,image:a,sourceId:t.id,commentary:n}):(O("Invalid link"),null)}),[F,O,oe,Q,se,K]),de=(0,c.useCallback)((function(e,t,n,r){return e.preventDefault(),le?null:(0,w.Eh)(r)?K({postId:t,type:d.xj.Share,sourceId:r.id,title:n}):ee({id:t,commentary:n})}),[ee,le,K]),pe=(0,c.useCallback)((function(e,t){return(0,w.Eh)(t)?K(x(x({},e),{},{sourceId:t.id,type:d.xj.Freeform})):I(x(x({},e),{},{sourceId:t.id})),null}),[I,K]);return{isLoadingPreview:X,getLinkPreview:U,onSubmitPost:ue,onUpdateSharePost:de,isPosting:se,onEditFreeformPost:W,preview:F,isSuccess:ce,onSubmitFreeformPost:pe,onUpdatePreview:D}}},17398:(e,t,n)=>{n.d(t,{Y:()=>i});var r=n(21441);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){return Array.from(e.elements).reduce((function(e,t){return""===t.name?e:"checkbox"===t.type?a(a({},e),{},(0,r.A)({},t.name,t.checked)):"radio"!==t.type||t.checked?"file"===t.type?a(a({},e),{},(0,r.A)({},t.name,0===t.files.length?null:t.files)):a(a({},e),{},(0,r.A)({},t.name,t.value.length?t.value:null)):e}),t)}},73855:(e,t,n)=>{n.d(t,{NF:()=>c,PK:()=>i,rZ:()=>l,vv:()=>s});var r=n(21441),o=n(81602);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=function(e){return"string"==typeof e&&"true"===e.toLowerCase()},s=function(e,t){return"number"!=typeof e?"":e.toLocaleString(["en-US"],function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({minimumFractionDigits:2,maximumFractionDigits:2},t))},l=function(e){return e>1e5?(0,o.Kt)(e):s(e,{minimumFractionDigits:0})},c=function(e){var t=e.currency,n=e.amount;return new Intl.NumberFormat(navigator.language,{minimumFractionDigits:2,maximumFractionDigits:2,style:"currency",currency:t}).format(n)}}}]);