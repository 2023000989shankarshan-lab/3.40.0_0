"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[4360],{68334:(e,t,n)=>{n.d(t,{d:()=>p});var a=n(33998),o=n(34900),i=n(22155),r=n(30395),s=n.n(r);const l="_5r2X27zKbL3K-0KuztabLA==",u="_9VJTarzDvJAPMOKQbzHeEQ==",c="+hRUmPa5hVn8ncwI9jw3WQ==",d="D5NR++a7+cgnxCM1YywMSg==";var f=["className","labelClassName","inputId","name","checked","children","onToggle","compact","defaultTypo","disabled"],b=i.createElement;function m(e,t){var n=e.className,i=e.labelClassName,r=e.inputId,m=e.name,p=e.checked,g=e.children,v=e.onToggle,y=e.compact,S=void 0===y||y,h=e.defaultTypo,w=void 0===h||h,N=e.disabled,A=(0,o.A)(e,f);return b("label",{className:s()(n,"group relative flex items-center",N?"pointer-events-none cursor-not-allowed opacity-32":"cursor-pointer",c),htmlFor:r,ref:t},b("input",(0,a.A)({},A,{disabled:N,id:r,name:m,type:"checkbox",checked:p,onChange:v,className:"absolute h-0 w-0 opacity-0"})),b("span",{className:s()("relative block",S?"h-4 w-8":"h-5 w-10")},b("span",{className:s()("absolute bottom-0 left-0 top-0 my-auto w-full bg-theme-overlay-quaternary",S?"h-2.5 rounded-3":"h-3 rounded-4",l)}),b("span",{className:s()("absolute left-0 top-0 bg-text-tertiary",S?"h-4 w-4 rounded-3":"h-5 w-5 rounded-6",u)})),g&&b("span",{className:s()("ml-3 font-bold text-text-tertiary",w&&"typo-footnote",d,i)},g))}var p=i.forwardRef(m)},2759:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(14728),o=n(33998),i=n(22155),r=n(80244),s=n(94198),l=n(67380),u=n(68334),c=n(95412),d=n(79227),f=n(41536),b=n(96175),m=n(31121),p=n(85548),g=i.createElement,v=function(e){var t=e.squadId,n=e.disabled,a=(0,d.G)({params:[{referenceId:t,notificationType:m._n.SquadPostAdded}]}),o=a.preferences,i=a.muteNotification,r=a.subscribeNotification,s=a.isPreferencesReady,l=o.some((function(e){return(0,d.Q)(e,m._n.SquadPostAdded,t,[p.nb.Subscribed])}));return g(c.S,{className:"!px-0",checkmarkClassName:"!mr-0",name:t,checked:l,disabled:n||!s,onToggleCallback:function(){return l?i({referenceId:t,type:m._n.SquadPostAdded}):r({referenceId:t,type:m._n.SquadPostAdded})}})};const y=function(e){var t,n,i=(0,o.A)({},((0,a.A)(e),e)),c=(0,r.Z2)().squads,d=(0,b.A)(),y=d.notificationSettings,S=d.toggleGroup,h=d.getGroupStatus,w=(null==y||null===(t=y[m._n.SquadPostAdded])||void 0===t?void 0:t.inApp)!==p.nb.Subscribed;return g(s.aF,(0,o.A)({},i,{isDrawerOnMobile:!0}),g(s.aF.Header,null,g(s.aF.Title,null,"Squad notifications")),g(s.aF.Body,{className:"gap-5 overflow-x-hidden"},g("div",{className:"flex flex-row justify-between gap-4"},g("div",{className:"flex flex-1 flex-col gap-1"},g(l.o5,{type:l.kR.Body,bold:!0},"Notify me about new posts"),g(l.o5,{type:l.kR.Footnote},"Get notified when someone shares a new post in a squad youâ€™ve joined. You can control this per squad.")),g(u.d,{inputId:m._n.SquadPostAdded,name:m._n.SquadPostAdded,checked:(null==y||null===(n=y[m._n.SquadPostAdded])||void 0===n?void 0:n.inApp)===p.nb.Subscribed,onToggle:function(){S("squadNotifications",!h("squadNotifications","inApp"),"inApp")},compact:!1})),g("ul",{className:"flex flex-col gap-5"},c.map((function(e){return g("li",{className:"flex flex-row justify-between",key:e.id},g("div",{className:"flex items-center gap-3"},g(f._V,{className:"size-10 rounded-full object-cover",src:null==e?void 0:e.image,alt:"Squad avatar"}),g("div",{className:"flex max-w-64 flex-col items-baseline gap-1 mobileL:max-w-70 tablet:max-w-96 tablet:flex-row"},g(l.o5,{truncate:!0,type:l.kR.Callout,bold:!0},e.name),g(l.o5,{color:l.X8.Tertiary,type:l.kR.Footnote,truncate:!0},"@",e.handle))),g(v,{squadId:e.id,disabled:w}))})))))}},96175:(e,t,n)=>{n.d(t,{A:()=>w});var a=n(21441),o=n(85548),i=n(31121),r=n(5698),s=n(77535),l=n(80009),u=n(80244),c=n(30530),d=n(36899),f=n(42104);const b=function(){var e=(0,u.Z2)().user,t=(0,r.jE)(),n=(0,c.$h)(c.jZ.NotificationSettings,{id:null==e?void 0:e.id}),a=(0,s.I)({queryKey:n,queryFn:function(){return d.e.request(f.lE)}}),o=a.data,i=a.isLoading,b=(0,l.n)({onMutate:function(e){var a=t.getQueryData(n);return t.setQueryData(n,{notificationSettings:e}),{oldData:a}},onError:function(e,a,o){var i=o.oldData;t.setQueryData(n,i)},mutationFn:function(e){return(0,f.Gl)(e)}}).mutate;return{notificationSettings:null==o?void 0:o.notificationSettings,isLoading:i,mutate:b}};var m=n(61663),p=n(57952),g=n(2564);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={mentions:i.A6,achievements:i.ZU,following:i.x4,followingEmail:i.yk,streaks:i.Ul,squadRoles:i.ni,sourceSubmission:i.mv,squadPostReview:i.yL,squadModeration:i.BV,comments:i.pJ,squadNotifications:i.QS,creatorUpdatesEmail:i.un},h={extra:JSON.stringify({channel:"email",category:[p.aF.Product,p.aF.Marketing]})};const w=function(){var e=(0,g.o)(),t=e.unsubscribePersonalizedDigest,n=e.getPersonalizedDigest,r=(0,m.DX)().logEvent,s=b(),l=s.notificationSettings,u=s.isLoading,c=s.mutate;return{toggleSetting:function(e,t){var n,i=(null===(n=l[e])||void 0===n?void 0:n[t])===o.nb.Subscribed?o.nb.Muted:o.nb.Subscribed,s=y(y({},l),{},(0,a.A)({},e,y(y({},l[e]),{},(0,a.A)({},t,i))));i===o.nb.Subscribed?r(y({event_name:p.VB.EnableNotification},"email"===t?h:{})):r(y({event_name:p.VB.DisableNotification},"email"===t?h:{})),c(s)},toggleGroup:function(e,t,n){var i=S[e],s=t?o.nb.Subscribed:o.nb.Muted,u=y(y({},l),i.reduce((function(e,t){return y(y({},e),{},(0,a.A)({},t,y(y({},l[t]),{},(0,a.A)({},n,s))))}),{}));s===o.nb.Subscribed?r(y({event_name:p.VB.EnableNotification},"email"===n?h:{})):r(y({event_name:p.VB.DisableNotification},"email"===n?h:{})),c(u)},getGroupStatus:function(e,t){return S[e].some((function(e){var n;return(null==l||null===(n=l[e])||void 0===n?void 0:n[t])===o.nb.Subscribed}))},setNotificationStatus:function(e,t,n){var o=y(y({},l),{},(0,a.A)({},e,y(y({},l[e]),{},(0,a.A)({},t,n))));c(o)},unsubscribeAllEmail:function(){var e=Object.keys(l||{}).reduce((function(e,t){return e[t]=y(y({},l[t]),{},{email:o.nb.Muted}),e}),{});c(e),n(f.Cs.Digest)&&t({type:f.Cs.Digest}),n(f.Cs.Brief)&&(0,i.NR)(l,"email")&&t({type:f.Cs.Brief})},emailsDisabled:!l||!Object.values(l).some((function(e){return e.email===o.nb.Subscribed})),notificationSettings:l,isLoadingPreferences:u}}}}]);