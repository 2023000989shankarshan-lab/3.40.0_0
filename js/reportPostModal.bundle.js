"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2114,9686],{84606:(e,t,n)=>{n.r(t),n.d(t,{OTHER_KEY:()=>m,ReasonSelectionModal:()=>v,default:()=>y});var r=n(33998),o=n(34900),a=n(22155),i=n(35234),l=n(53823),s=n(83448),c=n(94198),u=n(16714),p=n(72870),d=n(64142),f=["onReport","reasons","heading","title","footer","disabled"],b=a.createElement,m="OTHER";function v(e){var t=e.onReport,n=e.reasons,v=e.heading,y=e.title,g=e.footer,O=e.disabled,h=(0,o.A)(e,f),P=(0,a.useState)(null),R=P[0],S=P[1],A=(0,a.useState)(),k=A[0],w=A[1],E=(0,p.G6)(p.bh.MobileL),j={disabled:!R||R===m&&!k||O,onClick:function(e){return t(e,R,k)}};return b(c.aF,(0,r.A)({isOpen:!0,kind:c.aF.Kind.FixedCenter},h,{formProps:{form:null,title:v,rightButtonProps:j,copy:{right:"Submit report"}}}),b(c.aF.Header,{title:v}),b(c.aF.Body,{className:"py-5"},y&&b("p",{className:"mb-6 text-text-tertiary typo-callout"},y),b(i.s,{name:"report_reason",options:"function"==typeof n?n(R):n,value:R,onChange:S}),b("p",{className:"mb-1 mt-6 px-2 font-bold typo-caption1"},"Anything else you'd like to add?"),b("textarea",{onInput:function(e){return w(e.currentTarget.value)},onFocus:function(){R||S(d.dV.Other)},className:"mb-1 h-20 w-full resize-none self-stretch rounded-10 bg-surface-float p-2 typo-body","data-testid":"report_comment"}),E?g:null),b(c.aF.Footer,{justify:g&&!E?u.F1.Between:u.F1.End},E?null:g,b(l.$n,{variant:s.Ak.Primary,disabled:!R||R===m&&!k||O,onClick:function(e){return t(e,R,k)}},"Submit report")))}const y=v},90516:(e,t,n)=>{n.r(t),n.d(t,{ReportPostModal:()=>E,default:()=>j});var r=n(33998),o=n(35001),a=n(21441),i=n(34900),l=n(64052),s=n(13318),c=n.n(s),u=n(22155),p=n(95412),d=n(53823),f=n(83448),b=n(16714),m=n(30062),v=n(11924),y=n(57952),g=n(61663),O=n(84606),h=n(64142),P=["index","post","origin","onReported","isAd"],R=u.createElement;function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=[{value:h.dV.Irrelevant,label:"Off-topic or wrong tags"},{value:h.dV.Broken,label:"Broken link"},{value:h.dV.Clickbait,label:"Misleading or clickbait"},{value:h.dV.Paywall,label:"Paywalled or inaccessible content"},{value:h.dV.Low,label:"Low-quality or AI-generated"},{value:h.dV.Spam,label:"Spam or scam"},{value:h.dV.Hateful,label:"Hate speech or harassment"},{value:h.dV.Nsfw,label:"Inappropriate, explicit, or NSFW"},{value:h.dV.Misinformation,label:"Misinformation or politically-oriented"},{value:h.dV.Copyright,label:"Plagiarism or copyright violation"},{value:h.dV.Privacy,label:"Privacy violation"},{value:h.dV.Other,label:"Other"}],w={IRRELEVANT:function(e){var t,n=e.post,r=e.selectedTags,o=e.setSelectedTags;return R(b.Ye,{className:"my-4 flex-wrap gap-2"},null===(t=n.tags)||void 0===t?void 0:t.map((function(e){var t=r.includes(e);return R(d.$n,{key:e,variant:t?f.Ak.Primary:f.Ak.Float,size:f.Mp.Small,onClick:function(){o(t?r.filter((function(t){return t!==e})):[].concat((0,l.A)(r),[e]))}},"#",e)})))}};function E(e){var t,n=e.index,a=e.post,l=e.origin,s=e.onReported,d=e.isAd,f=(0,i.A)(e,P),b=(0,g.DX)().logEvent,h=(0,u.useRef)(),S=(0,u.useState)((function(){return[]})),E=S[0],j=S[1],I=(0,u.useCallback)((function(e){return k.filter((function(e){var t;return("IRRELEVANT"!==e.value||0!==(null==a||null===(t=a.tags)||void 0===t?void 0:t.length))&&e})).map((function(t){var n=t.value===e&&w[t.value];return n?A(A({},t),{},{afterElement:R(n,{post:a,selectedTags:E,setSelectedTags:j})}):t}))}),[a,E]),C=(0,m.A)().reportPost,V=function(){var e=(0,o.A)(c().mark((function e(t,r,o){var i,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({id:a.id,reason:r,comment:o,tags:E});case 2:if(i=e.sent,i.successful){e.next=6;break}return e.abrupt("return");case 6:b((0,v.P5)(y.VB.ReportPost,a,{extra:{origin:l,reason:r,comment:o},is_ad:d})),"function"==typeof s&&s(a,{index:n,shouldBlockSource:null===(u=h.current)||void 0===u?void 0:u.checked}),f.onRequestClose(t);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return R(O.ReasonSelectionModal,(0,r.A)({},f,{isOpen:!0,onReport:V,reasons:I,heading:"Report post",title:null!=a&&a.title?'"'.concat(a.title,'"'):void 0,footer:R(p.S,{ref:h,name:"blockSource",className:"font-normal"},"Don't show posts from ",null==a||null===(t=a.source)||void 0===t?void 0:t.name)}))}const j=E},64142:(e,t,n)=>{n.d(t,{UR:()=>f,_q:()=>d,dV:()=>p,kt:()=>u});var r,o=n(21441),a=n(45322),i=n(2972),l=n(36899);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return e.Post="post",e.Source="source",e.Comment="comment",e.User="user",e}({}),p=function(e){return e.Nsfw="NSFW",e.Other="OTHER",e.Broken="BROKEN",e.Clickbait="CLICKBAIT",e.Low="LOW",e.Irrelevant="IRRELEVANT",e.Spam="SPAM",e.Harassment="HARASSMENT",e.Hateful="HATEFUL",e.Copyright="COPYRIGHT",e.Privacy="PRIVACY",e.Miscategorized="MISCATEGORIZED",e.Misinformation="MISINFORMATION",e.Illegal="ILLEGAL",e.Paywall="PAYWALL",e}({}),d=(0,i.gql)(r||(r=(0,a.A)(["\n  mutation SendReport(\n    $type: ReportEntity!\n    $id: ID!\n    $reason: ReportReason!\n    $comment: String\n    $tags: [String]\n  ) {\n    sendReport(\n      type: $type\n      id: $id\n      reason: $reason\n      comment: $comment\n      tags: $tags\n    ) {\n      _\n    }\n  }\n"]))),f=function(e){return function(e){return l.e.request(d,e)}(c(c({},e),{},{type:u.Source}))}}}]);