"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9736],{99314:(e,t,r)=>{r.r(t),r.d(t,{SquadMemberModal:()=>ee,default:()=>te});var n=r(33998),o=r(21441),a=r(56594),u=r(34900),i=r(22155),c=r(94198),s=r(87822),l=r(47734),d=r(59645),m=r(57952),b=r(97838),p=r(26540),f=r(6433),y=r(16714),v=r(5698),g=r(80009),O=r(69135),P=r(48389),j=r(30530),h=r(16971),k=r(80244),w=r(93526),q=r(36899);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var x=function(e){var t=e.squad,r=e.query,n=e.membersQueryParams,a=void 0===n?{}:n,u=e.membersQueryEnabled,c=(0,i.useContext)(w.c).queryKey,s=(0,k.Z2)().user,l=(0,v.jE)(),d=(0,j.$h)(j.jZ.SquadMembers,null,a,null==t?void 0:t.id,r),m=(0,g.n)({mutationFn:P.Mt,onSuccess:function(){return l.invalidateQueries({queryKey:d})}}).mutateAsync,b=(0,g.n)({mutationFn:P.jd,onSuccess:function(){return l.invalidateQueries({queryKey:d})}}).mutateAsync,p=(0,g.n)({mutationFn:P.Fh,onSuccess:function(){l.invalidateQueries({queryKey:c}),(0,h.T)(l,t,s,{collapsePinnedPosts:!0})}}).mutateAsync,f=(0,g.n)({mutationFn:P.oG,onSuccess:function(){l.invalidateQueries({queryKey:c}),(0,h.T)(l,t,s,{collapsePinnedPosts:!1})}}).mutateAsync,y=(0,O.q)({queryKey:d,queryFn:function(e){var n=e.pageParam;return q.e.request(P.UC,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:null==t?void 0:t.id,after:"string"==typeof n?n:void 0,query:r},a))},initialPageParam:"",enabled:!(null==t||!t.id)&&u,getNextPageParam:function(e){var t=e.sourceMembers;return(0,j.iP)(null==t?void 0:t.pageInfo)}});return(0,i.useMemo)((function(){var e,t;return{onUnblock:b,onUpdateRole:m,collapseSquadPinnedPosts:p,expandSquadPinnedPosts:f,membersQueryResult:y,members:null!==(e=null===(t=y.data)||void 0===t?void 0:t.pages.map((function(e){return e.sourceMembers.edges.map((function(e){return e.node}))})).flat())&&void 0!==e?e:[],membersQueryKey:d}}),[b,m,p,f,y,d])},A=r(34229),D=r(68390),M=r(17631),N=i.createElement;function F(){return N("div",{className:"flex flex-1 flex-col items-center justify-center py-10"},N(M.t,{secondary:!0,size:b.lK.XXXLarge}),N("p",{className:"text-text-secondary typo-body"},"No blocked members found"))}var K=r(35001),E=r(13318),U=r.n(E),C=r(13706),Q=r.n(C),B=r(83448),L=r(53823),I=r(27840),_=r(96878),R=r(68392),T=r(82940),$=i.createElement,W=Q()((function(){return r.e(3056).then(r.bind(r,45648))}),{loadableGenerated:{webpack:function(){return[45648]}}});const Z=function(e){var t=e.squad,r=e.member,n=e.onUnblock,o=e.onUpdateRole,a=(0,I.k)().showPrompt,u=(0,R.mu)().displayToast,i=(0,k.Z2)().user,c=r.role,l=r.user,d=function(){var e=(0,K.A)(U().mark((function e(t){var r;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={title:"Unblock member?",description:"".concat(l.name," will now have access to join your Squad and can then post, upvote and comment"),okButton:{title:"Unblock",variant:B.Ak.Primary},content:$(_.u,{disableTooltip:!0,user:l,className:{container:"justify-center px-6 py-3",textWrapper:"max-w-fit"}}),className:{buttons:"mt-6"}},e.next=4,a(r);case 4:if(!e.sent){e.next=7;break}n(t),u("Member is now unblocked");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c===s._h.Blocked?$(T.m,{content:"Unblock"},$(L.$n,{className:"my-auto ml-2",variant:B.Ak.Tertiary,icon:$(M.t,null),onClick:d})):i&&i.id===l.id||!i?null:$(W,{squad:t,member:r,onUpdateRole:o})};var X=r(13767),V=["squad"],z=i.createElement;function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=function(e){return e.AllMembers="Squad members",e.Moderators="Moderators",e.BlockedMembers="Blocked members",e}(J||{}),Y=function(e){var t=e.squad,r=(0,f.t)({squad:t,origin:m.$e.SquadMembersList}),n=r.copying,o=r.logAndCopyLink;return(0,P.pZ)(t,s.Wk.Invite)?z("button",{type:"button",disabled:n,className:"flex items-center justify-start px-6 py-3 hover:bg-surface-hover",onClick:function(){o()}},z(y.Wt,{className:"mr-4 h-12 w-12 rounded-10 bg-surface-float"},z(p.q,{size:b.lK.Large,className:"text-raw-salt-90"})),z("p",{className:"text-raw-salt-90 typo-callout"},"Copy invitation link")):null};function ee(e){var t,r=e.squad,o=(0,u.A)(e,V),b=(0,i.useState)(null),p=b[0],f=b[1],v=(0,i.useState)(""),g=v[0],O=v[1],j=(0,A.A)((function(e){return O(e)}),D.n$),h=(0,a.A)(j,1)[0],k=x({squad:r,query:null!=g&&null!==(t=g.trim)&&void 0!==t&&null!==(t=t.call(g))&&void 0!==t&&t.length?g:void 0,membersQueryParams:{role:p},membersQueryEnabled:!0}),w=k.members,q=k.membersQueryResult,S=k.onUnblock,M=k.onUpdateRole,N=k.membersQueryKey;(0,X.A)({queryKey:N,queryProp:"sourceMembers"});var K=(0,P.pZ)(r,s.Wk.ViewBlockedMembers),E=(0,i.useMemo)((function(){return K?Object.values(J):Object.values(J).filter((function(e){return e!==J.BlockedMembers}))}),[K]);return z(l.A,(0,n.A)({},o,{kind:c.aF.Kind.FixedCenter,title:"Squad members",showSubscribe:!1,tabs:E,defaultView:J.AllMembers,header:z(c.aF.Header.Tabs,{onTabClick:function(e){switch(e){case J.Moderators:f(s._h.Moderator);break;case J.BlockedMembers:f(s._h.Blocked);break;default:f(null)}}}),scrollingProps:{isFetchingNextPage:q.isFetchingNextPage,canFetchMore:(0,d.c)(q),fetchNextPage:q.fetchNextPage},userListProps:K&&{afterContent:function(e,t){return z(Z,{onUpdateRole:M,squad:r,key:"squad_option_".concat(e.id),member:w[t],onUnblock:function(){return S({sourceId:r.id,memberId:e.id})}})},emptyPlaceholder:p===s._h.Blocked?z(F,null):z(y.Wt,{className:"p-10 text-text-tertiary typo-callout"},"No"," ",p===s._h.Moderator?"moderator":"member"," ","found"),isLoading:q.isPending,initialItem:p===s._h.Blocked||null!=g&&g.length?void 0:z(Y,{squad:r})},users:null==w?void 0:w.map((function(e){var t=e.user,r=e.role;return H(H({},t),{},{role:r})})),onSearch:h,origin:m.$e.SquadMembersList}))}const te=ee},13767:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(21441),o=r(56594),a=r(87053),u=r(30530),i=r(84295);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(e){var t=e.queryKey,r=e.queryProp;return(0,a.K)({matcher:i.cI,callback:function(e){var a=e.mutation,c=e.variables,l=e.queryClient,d=l.getQueryData(t),m=a.options.mutationKey,b=(0,o.A)(m,1)[0];if(d){var p=i.WK[b],f=c,y=f.id,v=f.entity;l.setQueryData(t,(function(e){var t;return s(s({},e),{},{pages:null===(t=e.pages)||void 0===t?void 0:t.map((function(e){var t;return(0,n.A)({},r,s(s({},e[r]),{},{edges:null===(t=e[r].edges)||void 0===t?void 0:t.map((function(e){var t;return(null===(t=e.node.user)||void 0===t?void 0:t.id)===y?s(s({},e),{},{node:s(s({},e.node),{},{user:s(s({},e.node.user),(0,u.$$)({data:e.node.user,entity:v,status:p}))})}):e}))}))}))})}))}}})}},6433:(e,t,r)=>{r.d(t,{t:()=>s});var n=r(56594),o=r(98235),a=r(61663),u=r(57952),i=r(9495),c=r(71623),s=function(e){var t=e.squad,r=e.origin,s=(0,a.DX)().logEvent,l=(0,i.d)().completeAction,d=t.referralUrl,m=(0,o.L)((function(){return d})),b=(0,n.A)(m,2),p=b[0],f=b[1];return{invitation:d,copying:p,logAndCopyLink:function(){return s({event_name:u.VB.ShareSquadInvitation,extra:JSON.stringify({origin:r,squad:null==t?void 0:t.id})}),l(c.X2.SquadInvite),f()}}}},73855:(e,t,r)=>{r.d(t,{NF:()=>s,PK:()=>u,rZ:()=>c,vv:()=>i});var n=r(21441),o=r(81602);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var u=function(e){return"string"==typeof e&&"true"===e.toLowerCase()},i=function(e,t){return"number"!=typeof e?"":e.toLocaleString(["en-US"],function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({minimumFractionDigits:2,maximumFractionDigits:2},t))},c=function(e){return e>1e5?(0,o.Kt)(e):i(e,{minimumFractionDigits:0})},s=function(e){var t=e.currency,r=e.amount;return new Intl.NumberFormat(navigator.language,{minimumFractionDigits:2,maximumFractionDigits:2,style:"currency",currency:t}).format(r)}}}]);