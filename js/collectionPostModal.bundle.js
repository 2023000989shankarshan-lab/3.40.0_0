"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[6316],{95117:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ce});var n=o(33998),a=o(34900),s=o(22155),i=o(94198),l=o(57952),r=o(5106),c=o(53995),u=o(56607),p=o(21441),d=o(30395),f=o.n(d),m=o(95974),g=o(71992),v=o(68392),b=o(30606),P=o(76179),x=o(59837),N=o(16763),y=o(63952),h=o(81565),O=o(37774),A=o(16714),w=o(22514),C=o(44481),k=o(49577),j=o(9495),S=o(71623),E=o(83448),D=s.createElement,T=function(e){var t=e.className,o=(0,j.d)(),n=o.checkHasCompleted,a=o.completeAction;return!o.isActionsFetched||n(S.X2.CollectionsIntro)?null:D("span",{className:f()("relative flex w-full flex-row rounded-10 border border-accent-cabbage-default p-3 pr-2",t)},D("div",{className:"flex flex-1 flex-col typo-subhead"},D("strong",null,"Introducing collections!"),D("p",{className:"mt-2"},"Collections are posts that aggregate all the information about specific news to help you save time and discuss with the community.")),D(k.A,{size:E.Mp.XSmall,onClick:function(){return a(S.X2.CollectionsIntro)}}))},L=o(35001),q=o(13318),F=o.n(q),I=o(5196),H=o(13707),R=o(53823),_=s.createElement,M={type:"button",iconOnly:!0,buttonSize:E.Mp.Small},V=function(e){var t=e.hasNext,o=e.hasPrevious,a=e.onNext,s=e.onPrevious;return _("div",{className:"flex items-center justify-end border-t border-border-subtlest-tertiary p-3"},_(R.$n,(0,n.A)({},M,{icon:_(H.HK,{className:"-rotate-90"}),variant:E.Ak.Tertiary,disabled:!o,onClick:s})),_(R.$n,(0,n.A)({},M,{icon:_(H.HK,{className:"rotate-90"}),variant:E.Ak.Tertiary,disabled:!t,onClick:a})))},$=o(9062),z=o(55059),K=o(69069),X=o(7986),B=o(21861),Z=o(5698),J=o(69135),Q=o(30530),U=o(91201);function Y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function G(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(o),!0).forEach((function(t){(0,p.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var W=o(38638),ee=s.createElement,te=function(e){var t=e.className,o=e.post,n=e.perPage,a=void 0===n?z._:n,i=e.relationType,l=function(e){var t,o=e.postId,n=e.relationType,a=e.perPage,i=void 0===a?z._:a,l=(0,U.D)().requestMethod,r=(0,Z.jE)(),c=(0,J.q)({queryKey:(0,Q.$h)(Q.jZ.RelatedPosts,null,{id:o,type:n}),queryFn:(t=(0,L.A)(F().mark((function e(t){var a,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageParam,e.next=3,l(z.bY,{id:o,relationType:n,first:i,after:a});case 3:return s=e.sent,e.abrupt("return",s.relatedPosts);case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),initialPageParam:"",enabled:!!o,getNextPageParam:function(e){return(0,Q.iP)(null==e?void 0:e.pageInfo)},select:(0,s.useCallback)((function(e){if(e)return G(G({},e),{},{pages:e.pages.filter((function(e){return!(null==e||!e.edges.length)}))})}),[]),staleTime:Q.b2.Default,initialData:function(){if(n===z.Vv.Collection){var e=r.getQueryData((0,Q.UH)(o));if(null!=e&&e.relatedCollectionPosts)return{pages:[e.relatedCollectionPosts],pageParams:[null]}}}});return{relatedPosts:c.data,isLoading:c.isLoading,hasNextPage:c.hasNextPage,fetchNextPage:c.fetchNextPage,isFetchingNextPage:c.isFetchingNextPage}}({postId:o.id,relationType:i,perPage:a}),r=l.relatedPosts,c=l.isLoading,u=l.isFetchingNextPage,p=l.hasNextPage,d=l.fetchNextPage,m=(0,s.useState)(0),g=m[0],v=m[1],b=null==r?void 0:r.pages[g],P=c||!(null==b||!b.edges.length),x=!(null==r||!r.pages[g+1]);return(0,s.useEffect)((function(){p&&!x&&d()}),[p,x,d]),P?ee("div",{className:f()(t,"flex flex-col",I.Vj)},ee("div",{className:"flex cursor-pointer items-center justify-between rounded-16 rounded-t-16 px-4 py-1.5 laptop:cursor-auto laptop:py-4 laptop:!pb-0"},ee("p",{className:"font-bold text-text-quaternary typo-callout laptop:text-text-quaternary"},o.numCollectionSources," sources")),ee("div",{className:"flex flex-col pb-0 pt-2 laptop:min-h-[14rem]"},c&&ee("article",{"aria-busy":!0,className:"flex w-60 flex-col items-stretch px-4 py-2 laptop:w-full"},ee("div",{className:"mb-2 flex items-center"},ee($._,{className:"mr-2 h-6 w-6 rounded-full"}),ee($._,{className:"h-4 w-24"})),ee("div",{className:"mb-2 flex flex-1 flex-col items-center"},ee($._,{className:"my-1 h-4 w-full"}),ee($._,{className:"my-1 h-4 w-full"}))),!c&&(null==b?void 0:b.edges.map((function(e){var t=e.node;return ee("article",{key:t.id,className:"relative flex flex-col gap-2 px-4 py-2 hover:bg-surface-hover"},ee(B.hB,{className:"cursor-pointer",href:t.commentsPermalink,title:t.title}),ee("div",{className:"flex overflow-hidden"},ee(K.J,{source:t.source,size:W.Ov.Small}),ee(X.A,{description:t.source.name,createdAt:t.createdAt})),ee("p",{className:"line-clamp-2 text-text-link typo-callout"},t.title),!!t.summary&&ee("p",{className:"line-clamp-2 text-text-tertiary typo-footnote"},t.summary))})))),ee(V,{hasNext:x,hasPrevious:g>0,onPrevious:function(){v((function(e){return e?e-1:0}))},onNext:(0,L.A)(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:if(!p||x){e.next=5;break}return e.next=5,d();case 5:v((function(e){return e+1}));case 6:case"end":return e.stop()}}),e)})))})):null},oe=o(97789),ne=s.createElement,ae=function(e){var t=e.onCopyPostLink,o=e.post,n=e.origin,a=e.className;return ne(A.P8,{className:a},ne(T,{className:"hidden laptop:flex"}),ne(te,{post:o,relationType:z.Vv.Collection}),ne(C.A,{post:o}),ne(w._,{post:o,origin:n,onCopyPostLink:t,link:o.commentsPermalink}),ne(oe.j,null))},se=o(56047),ie=o(56392),le=o(80244),re=o(54883),ce=o(29192),ue=o(9895),pe=o(1414),de=o(84253),fe=o(63423),me=o(90269),ge=o(15837),ve=["post","onClose","inlineActions","className","notificationClassName"],be=s.createElement,Pe=(0,fe.A)("div","flex flex-row items-center"),xe=function(e){var t=e.post,o=(e.onClose,e.inlineActions,e.className),s=(e.notificationClassName,(0,a.A)(e,ve));return be(Pe,(0,n.A)({},s,{className:f()("gap-2",o)}),be(ge.F,{post:t,buttonVariant:null!=s&&s.isFixedNavigation?E.Ak.Tertiary:E.Ak.Secondary}),be(me.I,{post:t,origin:l.$e.CollectionModal}))},Ne=s.createElement;function ye(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function he(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(o),!0).forEach((function(t){(0,p.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ye(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Oe=(0,pe.h)((function(e){var t,o,n,a=e.post,i=e.className,l=void 0===i?{}:i,r=e.shouldOnboardAuthor,c=e.origin,u=e.position,p=e.inlineActions,d=e.onPreviousPost,A=e.onNextPost,w=e.onClose,C=e.postPosition,k=e.isFallback,j=e.customNavigation,S=e.backToSquad,E=e.isBannerVisible,D=e.isPostPage,L=(0,le.Z2)().user,q=(0,v.mu)().subject,F=(0,P.A)({origin:c,post:a}),I=a.updatedAt,H=a.contentHtml,R=a.image,_=F.onCopyPostLink,M=F.onReadArticle,V=!!d||!!A,$=f()("laptop:flex-row laptop:pb-0",null==l?void 0:l.container),z={postPosition:C,onPreviousPost:d,onNextPost:A,post:a,onReadArticle:M,onClose:w,inlineActions:p},K=(0,ce.L)();return(0,s.useEffect)((function(){null!=a&&a.id&&null!=L&&L.id&&K(a.id)}),[null==a?void 0:a.id,K,null==L?void 0:L.id]),Ne(b.A,{hasNavigation:V,className:$,"aria-live":q===v.a0.PostContent?"polite":"off",navigationProps:"fixed"===u?he(he({},z),{},{isBannerVisible:E,className:he(he({},null==l?void 0:l.fixedNavigation),{},{container:f()(null==l||null===(t=l.fixedNavigation)||void 0===t?void 0:t.container,D&&"tablet:max-w-[calc(100%-4rem)]")})}):null},Ne(se.K,{className:f()("relative",null==l?void 0:l.content),"data-testid":"postContainer"},Ne(x.N,{className:he(he({},l),{},{onboarding:f()(null==l?void 0:l.onboarding,S&&"mb-6"),navigation:{actions:null==l||null===(o=l.navigation)||void 0===o?void 0:o.actions,container:f()("pt-6",null==l||null===(n=l.navigation)||void 0===n?void 0:n.container)}}),isPostPage:D,isFallback:k,customNavigation:j,shouldOnboardAuthor:r,navigationProps:z,engagementProps:F,origin:c,post:a},Ne("div",{className:"mb-6 flex flex-col gap-6"},Ne(T,{className:"mt-6 laptop:hidden"}),Ne("div",{className:"flex flex-row items-center pt-6"},Ne(m.A,{href:"".concat(re.ZO,"sources/collections"),passHref:!0},Ne(ie.a,{tag:"a",label:"Collection",className:"bg-theme-overlay-float-cabbage text-brand-default"})),Ne(xe,{post:a,onClose:w,className:"ml-auto hidden laptop:flex",contextMenuId:"post-widgets-context"})),Ne("h1",{className:"break-words font-bold typo-large-title","data-testid":"post-modal-title"},a.title),Ne(de.h,{post:a}),!!I&&Ne("div",{className:"flex items-center text-text-tertiary typo-footnote"},Ne("span",null,"Last updated")," ",Ne(y.wv,null),Ne(ue.o,{date:I,type:h.pT.Post})),R&&Ne("div",{className:"block h-auto w-full overflow-hidden rounded-12"},Ne(g.o,{imgSrc:R,imgAlt:"Post cover image",ratio:"52%",fallbackSrc:N.uC,eager:!0,fetchPriority:"high"})),Ne(O.A,{content:H})))),Ne(ae,{onCopyPostLink:_,post:a,className:"pb-8 pt-6",onClose:w,origin:c}))})),Ae=["id","className","onRequestClose","onPreviousPost","onNextPost","postPosition","post"],we=s.createElement;function Ce(e){e.id,e.className;var t=e.onRequestClose,o=e.onPreviousPost,s=e.onNextPost,p=e.postPosition,d=e.post,f=(0,a.A)(e,Ae),m=(0,r.A)({isDisplayed:f.isOpen,offset:0}),g=m.position,v=m.onLoad;return we(c.A,(0,n.A)({},f,{post:d,onAfterOpen:v,onRequestClose:t,postType:u.xj.Collection,source:d.source,loadingClassName:"!pb-2 laptop:pb-0",postPosition:p,onPreviousPost:o,onNextPost:s}),we(Oe,{position:g,post:d,postPosition:p,onPreviousPost:o,onNextPost:s,inlineActions:!0,className:{onboarding:"mt-8",navigation:{actions:"ml-auto laptop:hidden"},fixedNavigation:{container:i.HR[i.aF.Size.XLarge],actions:"ml-auto"}},onClose:t,origin:l.$e.CollectionModal}))}}}]);