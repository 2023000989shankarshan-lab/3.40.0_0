"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[448],{9602:(e,n,t)=>{t.d(n,{k:()=>l});var r,a=t(33998),o=t(22155),i=t(97838);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c.apply(null,arguments)}const s=function(e){return o.createElement("svg",c({height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=o.createElement("g",{fill:"none"},o.createElement("g",{fill:"#e01e5a"},o.createElement("path",{d:"M6.258 14.613c0 1.145-.935 2.08-2.08 2.08a2.086 2.086 0 01-2.081-2.08c0-1.145.935-2.08 2.08-2.08h2.081zM7.306 14.613c0-1.145.936-2.08 2.081-2.08s2.08.935 2.08 2.08v5.21c0 1.145-.935 2.08-2.08 2.08s-2.08-.935-2.08-2.08z"})),o.createElement("g",{fill:"#36c5f0"},o.createElement("path",{d:"M9.387 6.258a2.086 2.086 0 01-2.08-2.08c0-1.146.935-2.081 2.08-2.081s2.08.935 2.08 2.08v2.081zM9.387 7.306c1.145 0 2.08.936 2.08 2.081s-.935 2.08-2.08 2.08h-5.21c-1.145 0-2.08-.935-2.08-2.08s.935-2.08 2.08-2.08z"})),o.createElement("g",{fill:"#2eb67d"},o.createElement("path",{d:"M17.742 9.387c0-1.145.935-2.08 2.08-2.08s2.081.935 2.081 2.08-.935 2.08-2.08 2.08h-2.081zM16.694 9.387c0 1.145-.936 2.08-2.081 2.08a2.086 2.086 0 01-2.08-2.08v-5.21c0-1.145.935-2.08 2.08-2.08s2.08.935 2.08 2.08z"})),o.createElement("g",{fill:"#ecb22e"},o.createElement("path",{d:"M14.613 17.742c1.145 0 2.08.935 2.08 2.08s-.935 2.081-2.08 2.081a2.086 2.086 0 01-2.08-2.08v-2.081zM14.613 16.694a2.086 2.086 0 01-2.08-2.081c0-1.145.935-2.08 2.08-2.08h5.21c1.145 0 2.08.935 2.08 2.08s-.935 2.08-2.08 2.08z"})))))};var u=o.createElement,l=function(e){return u(i.Ay,(0,a.A)({},e,{IconPrimary:s,IconSecondary:s}))}},56237:(e,n,t)=>{t.r(n),t.d(n,{default:()=>se});var r=t(33998),a=t(35001),o=t(34900),i=t(13318),c=t.n(i),s=t(22155),u=t(30395),l=t.n(u),d=t(94198),p=t(55238),g=t(83448),f=t(53823),h=t(72870),I=t(69069),y=t(38638),v=t(67380),m=t(60665),b=t(9602),k=t(5698),w=t(80009),O=t(71705),S=t(30530),x=t(80244),A=t(27840),j=t(21441),P=t(4315),C=t(19505),D=((0,j.A)({},O.Ah.Slack,b.k),{title:P.W.integrations.prompt.deleteSourceIntegration.title,description:P.W.integrations.prompt.deleteSourceIntegration.description,okButton:{title:P.W.integrations.prompt.deleteSourceIntegration.okButton,color:C.h.Ketchup}}),q={title:P.W.integrations.prompt.deleteIntegration.title,description:P.W.integrations.prompt.deleteIntegration.description,okButton:{title:P.W.integrations.prompt.deleteIntegration.okButton,color:C.h.Ketchup}},$=t(36899),E=t(61663),N=t(57952),T=t(61027),M=t(30794),R=t(74689),z=t(54883),_=t(41536),F=s.createElement,B=function(e){var n=e.title,t=void 0===n?"Squad + Slack = ðŸ”¥":n,r=e.description,a=void 0===r?"Get instant updates in Slack and keep the conversation going!":r,o=e.headerImg,i=e.onConnect;return F(d.aF.Body,{className:"flex flex-col items-center justify-center gap-4 text-center"},F(_._V,{className:"rounded-16",src:o,alt:"Slack integration"}),F(v.o5,{type:v.kR.Title1,bold:!0,color:v.X8.Primary},t),F(v.o5,{type:v.kR.Body,color:v.X8.Tertiary},a),F(f.$n,{className:"w-full",type:"button",variant:g.Ak.Primary,size:g.Mp.Large,onClick:i},"Connect to Slack"),F(f.$n,{className:"w-full",tag:"a",type:"button",variant:g.Ak.Float,size:g.Mp.Large,href:z.Hg,target:"_blank"},"Read more âž”"))},W=t(87822),K=t(85681),U=t(77955),Z=t(56594),X=t(77535),L=t(68390);function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach((function(n){(0,j.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Q=t(42104);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,j.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,j.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ne=t(68392);function te(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?te(Object(t),!0).forEach((function(n){(0,j.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ae=function(e){var n=e.source,t=e.redirectPath,r=(0,E.DX)().logEvent,o=function(){var e,n=(0,x.Z2)().user,t=(0,k.jE)(),r=(0,K.W)(),o=(0,ne.mu)().displayToast,i=(0,w.n)({mutationFn:(e=(0,a.A)(c().mark((function e(n){var t,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.channelId,a=n.integrationId,o=n.sourceId,e.next=3,r.connectSource({channelId:t,integrationId:a,sourceId:o});case 3:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:(0,S.$h)(S.jZ.UserSourceIntegrations,n)}),o(P.W.integrations.success.integrationSaved)},onError:function(){o(P.W.error.generic)}});return{onSave:i.mutateAsync,isSaving:i.isPending}}(),i=o.onSave,u=o.isSaving,l=(0,s.useState)({}),d=l[0],p=l[1],g=function(e){var n,t=e.userIntegrationType,r=e.sourceId,o=e.queryOptions,i=(0,x.Z2)().user,s=!(!t||!r),u=(0,X.I)(ee(ee({queryKey:(0,S.$h)(S.jZ.UserSourceIntegrations,i,{sourceId:r,userIntegrationType:t}),queryFn:(n=(0,a.A)(c().mark((function e(n){var t,r,a,o,i,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.queryKey,r=t,a=(0,Z.A)(r,3),o=a[2],e.prev=2,e.next=5,$.e.request(O.Gn,o);case 5:return i=e.sent,e.abrupt("return",i.sourceIntegration);case 9:if(e.prev=9,e.t0=e.catch(2),u=e.t0,l=null===(s=u.response)||void 0===s||null===(s=s.errors)||void 0===s||null===(s=s[0])||void 0===s||null===(s=s.extensions)||void 0===s?void 0:s.code,![$.hD.NotFound,$.hD.Forbidden].includes(l)){e.next=15;break}return e.abrupt("return",null);case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return n.apply(this,arguments)}),staleTime:S.b2.Default},o),{},{enabled:void 0!==(null==o?void 0:o.enabled)?o.enabled&&s:s}));return u}({userIntegrationType:O.Ah.Slack,sourceId:n.id}),f=g.data,h=function(){var e,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).queryOptions,t=(0,x.Z2)().user,r=!!t,o=(0,X.I)(H(H({queryKey:(0,S.$h)(S.jZ.UserIntegrations,t),queryFn:(e=(0,a.A)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.e.request(Q.wf);case 2:return n=e.sent,e.abrupt("return",n.userIntegrations.edges.map((function(e){return e.node})));case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),staleTime:S.b2.Default},n),{},{enabled:void 0!==(null==n?void 0:n.enabled)?n.enabled&&r:r}));return o}({queryOptions:{select:(0,s.useCallback)((function(e){var n=e.filter((function(e){return e.type===O.Ah.Slack}));return n.length>0&&n.push({id:"new",type:O.Ah.Slack,createdAt:new Date,updatedAt:new Date,name:"Connect another workspace",userId:"new"}),n}),[])}}),I=h.data,y=h.isLoading,v=d.userIntegration||(null==f?void 0:f.userIntegration)||(null==I?void 0:I[0]),m=(0,s.useMemo)((function(){return(null==I?void 0:I.findIndex((function(e){return e.id===(null==v?void 0:v.id)})))||0}),[I,v]),b=!(null==I||!I.length||y),A=function(e){var n,t=e.integrationId,r=e.queryOptions,o=(0,x.Z2)().user,i=!!t,s=(0,X.I)(J(J({queryKey:(0,S.$h)(S.jZ.SlackChannels,o,{integrationId:t}),queryFn:(n=(0,a.A)(c().mark((function e(n){var t,r,a,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.queryKey,r=t,a=(0,Z.A)(r,3),o=a[2],e.next=4,$.e.request(O.fI,o);case 4:return i=e.sent,e.abrupt("return",i.slackChannels.data.sort((0,L.KQ)("name")));case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),staleTime:S.b2.Default},r),{},{enabled:void 0!==(null==r?void 0:r.enabled)?r.enabled&&i:i}));return s}({integrationId:null==v?void 0:v.id}),j=A.data,C=d.channelId||(null==f?void 0:f.channelIds[0]),D=(0,s.useMemo)((function(){return(null==j?void 0:j.findIndex((function(e){return e.id===C})))||0}),[j,C]),q=(0,K.W)(),T=(0,s.useCallback)((function(){r({event_name:N.VB.StartAddingWorkspace,target_id:O.Ah.Slack,extra:JSON.stringify({source:n.id,origin:b?N.$e.WorkspaceDropdown:N.$e.SquadPage})}),q.connect({redirectPath:null!=t?t:"/".concat(n.type===W.Y1.Squad?"squads":"sources","/").concat(n.handle,"?lzym=").concat(U.K2.SlackIntegration)})}),[q,n,r,b,t]),M=(0,s.useCallback)((0,a.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({channelId:j[D].id,integrationId:v.id,sourceId:n.id});case 2:case"end":return e.stop()}}),e)}))),[j,i,D,null==v?void 0:v.id,n.id]),R=(0,s.useCallback)((function(e,n){"new"!==I[n].id?p((function(e){return re(re({},e),{},{userIntegration:I[n],channelId:void 0})})):T()}),[I,T]),z=(0,s.useCallback)((function(e,n){p((function(e){return re(re({},e),{},{channelId:j[n].id})}))}),[j]);return{state:d,slackIntegrations:I,channels:j,isLoadingIntegrations:y,selectedIntegration:v,selectedIntegrationIndex:m,selectedChannelIndex:D,onSave:M,isSaving:u,onConnectNew:T,onWorkspaceChange:R,onChannelChange:z,hasIntegrations:b}},oe=t(77921),ie=["source","trackStart","redirectPath","introTitle","introDescription"],ce=s.createElement;const se=function(e){var n=e.source,t=e.trackStart,i=e.redirectPath,u=e.introTitle,j=e.introDescription,P=(0,o.A)(e,ie),C=(0,h.G6)(h.bh.MobileL),_=function(){var e,n,t,r,o=(0,x.Z2)().user,i=(0,k.jE)(),s=(0,A.k)().showPrompt,u=(0,E.DX)().logEvent,l=(0,w.n)({mutationFn:(n=(0,a.A)(c().mark((function e(n){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.integrationId,r=n.integrationType,e.next=3,s(q);case 3:if(e.sent){e.next=6;break}throw new Error("User cancelled integration deletion");case 6:return u({event_name:N.VB.RevokeIntegrationAccess,target_id:r}),e.next=9,$.e.request(O.AI,{integrationId:t});case 9:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onSuccess:(e=(0,a.A)(c().mark((function e(n,t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.integrationId,i.setQueryData((0,S.$h)(S.jZ.UserIntegrations,o),(function(e){return null==e?void 0:e.filter((function(e){return e.id!==r}))}));case 2:case"end":return e.stop()}}),e)}))),function(n,t){return e.apply(this,arguments)})}),d=l.mutateAsync,p=(0,w.n)({mutationFn:(r=(0,a.A)(c().mark((function e(n){var t,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.sourceId,r=n.integrationId,a=n.integrationType,e.next=3,s(D);case 3:if(e.sent){e.next=6;break}throw new Error("User cancelled source integration deletion");case 6:return u({event_name:N.VB.RemoveIntegration,target_id:a,extra:JSON.stringify({source:t})}),e.next=9,$.e.request(O.If,{sourceId:t,integrationId:r});case 9:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),onSuccess:(t=(0,a.A)(c().mark((function e(n,t){var r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.sourceId,a=t.integrationId,i.setQueryData((0,S.$h)(S.jZ.UserSourceIntegrations,o,{integrationId:a}),(function(e){return null==e?void 0:e.filter((function(e){return 0==(e.userIntegration.id===a&&e.source.id===r)}))})),i.removeQueries({queryKey:(0,S.$h)(S.jZ.UserSourceIntegrations,o,{sourceId:r})});case 3:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})});return{removeIntegration:d,removeSourceIntegration:p.mutateAsync}}(),F=_.removeSourceIntegration,W=(0,E.DX)().logEvent,K=ae({source:n,redirectPath:i}),U=K.slackIntegrations,Z=K.channels,X=K.isLoadingIntegrations,L=K.selectedIntegration,V=K.selectedIntegrationIndex,J=K.selectedChannelIndex,Q=K.isSaving,G=K.onSave,H=K.onConnectNew,Y=K.onWorkspaceChange,ee=K.onChannelChange,ne=K.hasIntegrations,te=(0,s.useRef)(!1);(0,s.useEffect)((function(){t&&!X&&(te.current||(te.current=!0,W({event_name:N.VB.StartAddingIntegration,target_id:O.Ah.Slack,extra:JSON.stringify({source:n.id,has_integrations:ne})})))}),[t,X,W,n.id,ne]);var re=(0,s.useRef)(!1);(0,s.useEffect)((function(){ne&&(re.current||(re.current=!0,W({event_name:N.VB.ManageIntegration,target_id:O.Ah.Slack,extra:JSON.stringify({source:n.id})})))}),[ne,W,n.id]);var se=(0,T.r)().slackIntegrationHeader;return ce(d.aF,(0,r.A)({kind:d.aF.Kind.FlexibleCenter,size:d.aF.Size.XSmall,isDrawerOnMobile:!0},P),!X&&ce(R.O,{className:l()(ne?"right-4 top-4":"right-6 top-6"),onClick:P.onRequestClose,variant:ne?g.Ak.Tertiary:g.Ak.Primary}),X&&ce(d.aF.Body,{className:"flex items-center justify-center"},ce(M.a,null)),!X&&!ne&&ce(B,{title:u,description:j,headerImg:se,onConnect:H}),ne&&ce(d.aF.Body,{className:"flex flex-col gap-4"},ce("div",{className:"mr-auto flex w-[calc(100%-40px)] items-center justify-center"},ce(I.J,{source:n,size:y.Ov.Small}),ce(v.o5,{className:"flex min-w-0 flex-1 flex-wrap",type:v.kR.Callout,color:v.X8.Primary},ce(v.o5,{className:"mr-1",tag:v.UL.Span,bold:!0,color:v.X8.Primary,truncate:!0},n.name),ce(v.o5,{tag:v.UL.Span,color:v.X8.Tertiary,truncate:!0},"@".concat(n.handle)))),ce(v.o5,{tag:v.UL.H3,type:v.kR.Title2,color:v.X8.Primary,bold:!0},"Configure Integration"),!(null==U||!U.length)&&ce(p.m,{placeholder:"Select workspace",shouldIndicateSelected:!0,buttonSize:g.Mp.Medium,iconOnly:!1,selectedIndex:V,renderItem:function(e,n){var t="new"===U[n].id?m.c:b.k;return ce("span",{className:"flex gap-2 typo-callout"},ce(t,null),U[n].name)},icon:ce(b.k,null),options:null==U?void 0:U.map((function(e){return e.name})),onChange:Y,scrollable:!0}),ce("div",null,ce(v.o5,{className:"mb-2 flex items-center",type:v.kR.Body,color:v.X8.Tertiary},"Select channel",!(null==Z||!Z.length)&&ce(oe.Z,{className:"relative ml-1 bg-surface-float px-1"},Z.length)),!(null==Z||!Z.length)&&ce(p.m,{placeholder:"Select channel",shouldIndicateSelected:!0,buttonSize:g.Mp.Medium,iconOnly:!1,selectedIndex:J,renderItem:function(e,n){return ce("span",{className:"typo-callout"},"#".concat(Z[n].name))},options:null==Z?void 0:Z.map((function(e){return"#".concat(e.name)})),onChange:ee,scrollable:!0})),ce(v.o5,{className:"mb-2 flex items-center",type:v.kR.Caption1,color:v.X8.Tertiary},"Can't find your private channel?",ce("a",{className:"ml-1 underline",href:z.Hg},"Read here")),ce(f.$n,{type:"button",variant:g.Ak.Primary,size:g.Mp.Large,onClick:function(){var e=(0,a.A)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:null===(t=P.onRequestClose)||void 0===t||t.call(P,n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),loading:Q},"Save"),ce(f.$n,{type:"button",variant:C?g.Ak.Float:g.Ak.Tertiary,size:g.Mp.Medium,onClick:function(){var e=(0,a.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({integrationId:L.id,sourceId:n.id,integrationType:L.type});case 2:null===(r=P.onRequestClose)||void 0===r||r.call(P,t);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},"Remove integration")))}},71705:(e,n,t)=>{t.d(n,{AI:()=>h,Ah:()=>d,Gn:()=>f,If:()=>I,K2:()=>g,fI:()=>p});var r,a,o,i,c,s,u=t(45322),l=t(2972),d=function(e){return e.Slack="slack",e}({}),p=(0,l.gql)(r||(r=(0,u.A)(["\n  query SlackChannels($integrationId: ID!) {\n    slackChannels(integrationId: $integrationId, limit: 999) {\n      data {\n        id\n        name\n      }\n    }\n  }\n"]))),g=(0,l.gql)(a||(a=(0,u.A)(["\n  mutation SlackConnectSource(\n    $integrationId: ID!\n    $channelId: ID!\n    $sourceId: ID!\n  ) {\n    slackConnectSource(\n      integrationId: $integrationId\n      channelId: $channelId\n      sourceId: $sourceId\n    ) {\n      _\n    }\n  }\n"]))),f=(0,l.gql)(o||(o=(0,u.A)(["\n  query SourceIntegration(\n    $sourceId: ID!\n    $userIntegrationType: UserIntegrationType!\n  ) {\n    sourceIntegration(sourceId: $sourceId, type: $userIntegrationType) {\n      userIntegration {\n        id\n        userId\n        type\n      }\n      type\n      createdAt\n      updatedAt\n      source {\n        id\n      }\n      channelIds\n    }\n  }\n"]))),h=((0,l.gql)(i||(i=(0,u.A)(["\n  query SourceIntegrations($integrationId: ID!) {\n    sourceIntegrations(integrationId: $integrationId) {\n      edges {\n        node {\n          userIntegration {\n            id\n            userId\n            type\n          }\n          type\n          createdAt\n          updatedAt\n          source {\n            id\n            name\n            handle\n            image\n          }\n          channelIds\n        }\n      }\n    }\n  }\n"]))),(0,l.gql)(c||(c=(0,u.A)(["\n  mutation RemoveIntegration($integrationId: ID!) {\n    removeIntegration(integrationId: $integrationId) {\n      _\n    }\n  }\n"])))),I=(0,l.gql)(s||(s=(0,u.A)(["\n  mutation RemoveSourceIntegration($sourceId: ID!, $integrationId: ID!) {\n    removeSourceIntegration(\n      sourceId: $sourceId\n      integrationId: $integrationId\n    ) {\n      _\n    }\n  }\n"])))},85681:(e,n,t)=>{t.d(n,{W:()=>I});var r=t(35001),a=t(13318),o=t.n(a),i=t(22155),c=t(80244),s=t(85278),u=t(71705),l=t(54883),d=t(36899),p=t(61663),g=t(57952),f=t(74502),h=["channels:read","chat:write","channels:join","groups:read"],I=function(){var e=(0,c.Z2)().user,n=(0,p.DX)().logEvent,t=(0,i.useCallback)(function(){var n=(0,r.A)(o().mark((function n(t){var r,a,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.redirectPath,a=new URL("https://slack.com/oauth/v2/authorize"),i=new URL("".concat(f.y0,"/integrations/slack/auth/callback")),a.searchParams.append("redirect_uri",i.toString()),a.searchParams.append("state",e.id),a.searchParams.append("scope",h.join(",")),a.searchParams.append("client_id","1137730955072.7361269413077"),(0,s.TV)("slackRedirectPath",r,{path:"/",maxAge:3600,secure:!l.yz,domain:"daily.dev",sameSite:"lax"}),window.location.href=a.toString();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[null==e?void 0:e.id]),a=(0,i.useCallback)(function(){var e=(0,r.A)(o().mark((function e(t){var r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.integrationId,a=t.channelId,i=t.sourceId,n({event_name:g.VB.SetIntegration,target_id:u.Ah.Slack,extra:JSON.stringify({source:i})}),e.next=4,d.e.request(u.K2,{integrationId:r,channelId:a,sourceId:i});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]);return{connect:t,connectSource:a}}}}]);