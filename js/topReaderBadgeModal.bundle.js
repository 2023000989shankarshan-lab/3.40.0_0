"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9493],{41500:(e,t,n)=>{n.d(t,{s:()=>g});var a,r=n(33998),c=n(22155),o=n(97838);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(null,arguments)}const i=function(e){return c.createElement("svg",l({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),a||(a=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.25 14a.75.75 0 01.75.75v1.75a4.5 4.5 0 01-4.288 4.495L16.5 21h-9a4.5 4.5 0 01-4.495-4.288L3 16.5v-1.75a.75.75 0 011.5 0v1.75a3 3 0 002.824 2.995l.176.005h9a3 3 0 002.995-2.824l.005-.176v-1.75a.75.75 0 01.75-.75zm-7.796 1.85c-.269.2-.638.2-.907 0l-.085-.073-5.696-5.696-.074-.085A.762.762 0 016.758 8.93l.085.074 4.393 4.393.012-5.327-.01-4.304c0-.388.288-.708.661-.759L12.005 3c.387.001.706.29.755.663l.007.103-.012 4.258.011 5.371 4.391-4.391.086-.074a.762.762 0 011.066 1.066l-.074.085-5.696 5.696-.085.074z"})))};var s;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(null,arguments)}const d=function(e){return c.createElement("svg",u({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),s||(s=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 13.5a1 1 0 01.993.883L21 14.5v1.75a4.751 4.751 0 01-4.317 4.73l-.215.015-.218.005h-8.5a4.751 4.751 0 01-4.73-4.317l-.015-.215L3 16.25V14.5a1 1 0 011.993-.117L5 14.5v1.75a2.75 2.75 0 002.41 2.73l.17.015.17.005h8.5a2.75 2.75 0 002.73-2.41l.015-.17.005-.17V14.5a1 1 0 011-1zm-7.398 2.301c-.367.273-.869.263-1.224-.015l-.093-.082-5.708-5.71-.086-.1a1.012 1.012 0 011.434-1.401l.095.084 3.969 3.969.009-2.714-.01-5.816c0-.524.396-.955.904-1.01L12.005 3c.522.001.952.397 1.006.905l.006.11-.012 5.758.01 2.771 3.979-3.98.1-.085a1.012 1.012 0 011.402 1.434l-.085.095-5.709 5.708-.1.085z"})))};var p=c.createElement,g=function(e){return p(o.Ay,(0,r.A)({},e,{IconPrimary:d,IconSecondary:i}))}},79062:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(33998),r=n(35001),c=n(13318),o=n.n(c),l=n(22155),i=n(30395),s=n.n(i),u=n(80009),d=n(94198),p=n(77955),g=n(80244),f=n(21441),A=n(19505),m=((0,n(63423).A)("div","rounded-32"),function(e){return e.Vertical="DEFAULT",e.Horizontal="WIDE",e.Compact="COMPACT",e.Twitter="X",e}({})),v=function(e){return e.Default="default",e.Iron="iron",e.Bronze="bronze",e.Silver="silver",e.Gold="gold",e.Platinum="platinum",e.Diamond="diamond",e.Legendary="legendary",e}({}),b=(0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)({},v.Default,"linear-gradient(0deg, ".concat(A.A.salt[0],", ").concat(A.A.salt[0],"), linear-gradient(152.83deg, ").concat(A.A.salt[0]," 51.92%, ").concat(A.A.salt[20]," 85.8%)")),v.Iron,"linear-gradient(135.48deg, ".concat(A.A.pepper[10]," 0%, ").concat(A.A.pepper[90]," 20%, ").concat(A.A.pepper[10]," 47.5%, ").concat(A.A.pepper[50]," 67%, ").concat(A.A.pepper[90]," 83%, ").concat(A.A.pepper[10]," 100%),\n")+"linear-gradient(180deg, ".concat(A.A.salt[20]," 0%, ").concat(A.A.salt[10]," 85.42%)")),v.Bronze,"linear-gradient(135.48deg, ".concat(A.A.burger[10]," 0%, ").concat(A.A.burger[40]," 20%, ").concat(A.A.bun[10]," 47.5%, ").concat(A.A.burger[10]," 67%, ").concat(A.A.burger[40]," 83%, ").concat(A.A.burger[10]," 100%),\n")+"linear-gradient(180deg, ".concat(A.A.salt[20]," 0%, ").concat(A.A.salt[10]," 85.42%)")),v.Silver,"linear-gradient(135.11deg, ".concat(A.A.salt[90]," 0%, ").concat(A.A.salt[10]," 18%, ").concat(A.A.salt[50]," 31.5%, ").concat(A.A.salt[0]," 49.19%, ").concat(A.A.salt[50]," 61.5%, ").concat(A.A.salt[90]," 78.5%, ").concat(A.A.salt[50]," 95.5%),\n")+"linear-gradient(180deg, ".concat(A.A.salt[20]," 0%, ").concat(A.A.salt[10]," 85.42%)")),v.Gold,"linear-gradient(135deg, ".concat(A.A.bun[10]," 0%, ").concat(A.A.cheese[10]," 27.5%, ").concat(A.A.bun[10]," 50%, ").concat(A.A.cheese[10]," 75%, ").concat(A.A.bun[10]," 100%),\n")+"linear-gradient(180deg, ".concat(A.A.salt[20]," 0%, ").concat(A.A.salt[10]," 85.42%)")),v.Platinum,"linear-gradient(135.18deg, ".concat(A.A.avocado[10]," 0%, ").concat(A.A.blueCheese[10]," 24.16%, ").concat(A.A.water[10]," 40%, ").concat(A.A.avocado[10]," 71.33%, ").concat(A.A.water[10]," 100%),\n")+"linear-gradient(180deg, ".concat(A.A.salt[20]," 0%, ").concat(A.A.salt[10]," 85.42%)")),v.Diamond,"linear-gradient(135.18deg, ".concat(A.A.cabbage[10]," 0%, ").concat(A.A.onion[10]," 24.16%, ").concat(A.A.water[10]," 40%, ").concat(A.A.onion[10]," 71.33%, ").concat(A.A.cabbage[10]," 100%),\n")+"linear-gradient(180deg, ".concat(A.A.salt[20]," 0%, ").concat(A.A.salt[10]," 85.42%)")),v.Legendary,"linear-gradient(135.18deg, ".concat(A.A.ketchup[10]," 0%, ").concat(A.A.bacon[10]," 24.16%, ").concat(A.A.bun[10]," 40%, ").concat(A.A.bacon[10]," 71.33%, ").concat(A.A.ketchup[10]," 100%),\n")+"linear-gradient(180deg, ".concat(A.A.salt[20]," 0%, ").concat(A.A.salt[10]," 85.42%)")),y=((0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)((0,f.A)({},v.Default,10),v.Iron,20),v.Bronze,50),v.Silver,100),v.Gold,500),v.Platinum,1e3),v.Diamond,5e3),v.Legendary,1e4),(0,f.A)((0,f.A)((0,f.A)({},m.Vertical,"vertical"),m.Horizontal,"horizontal"),m.Twitter,"x"),n(13351)),h=n(52865),w=n(67380),x=n(9926),k=n(16763),O=n(81565),R=l.createElement,C=function(e){var t,n=e.user,a=e.issuedAt,r=e.keyword,c=n.name,o=n.username,l=n.image,i=(0,O.Yq)({value:a,type:O.pT.TopReaderBadge});return R("div",{className:"relative flex size-80 rounded-24 p-1 text-center text-text-primary",style:{backgroundImage:b[v.Gold]}},R("div",{className:"z-1 flex max-w-full flex-1 flex-col items-center rounded-20 px-3 py-5"},R("div",{className:"flex justify-center pb-1"},R(x.b,{imageUrl:l})),R(w.o5,{type:w.kR.Footnote,truncate:!0,bold:!0},c),R(w.o5,{type:w.kR.Caption1,color:w.X8.Secondary,truncate:!0,className:"pb-1"},"@",o),R(w.o5,{type:w.kR.Title2,bold:!0,className:"pb-1"},"Top reader"),R(w.o5,{tag:w.UL.Time,type:w.kR.Caption1,color:w.X8.Quaternary,dateTime:new Date(a).toISOString()},i),R("div",{className:"relative my-5 max-w-max rounded-12 p-1",style:{backgroundImage:b[v.Gold]}},R("div",{className:"relative overflow-hidden rounded-8 px-2 py-0.5"},R(w.o5,{type:w.kR.Title2,bold:!0,className:"relative z-1 text-black"},(null===(t=r.flags)||void 0===t?void 0:t.title)||r.value),R("div",{className:"absolute left-0 top-0 z-0 h-full w-full -scale-x-100",style:{backgroundImage:b[v.Gold]}}))),R("div",{className:"flex"},R(y.A,{className:{container:"h-logo"}}),R(h.A,{className:{container:"ml-1 h-logo"}}))),R("div",{className:"absolute left-0 top-0 z-0 h-full w-full p-1"},R("img",{src:k.ad,alt:"Badge background",className:"left-0 top-0 h-full w-full rounded-20 bg-background-default","aria-hidden":!0})))},N=n(53823),T=n(83448),j=n(41500),B=n(72870),P=function(){var e=(0,r.A)(o().mark((function e(t){var n,a,r,c,l,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filename,a=t.url,e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.blob();case 6:c=e.sent,l=URL.createObjectURL(c),(i=document.createElement("a")).href=l,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=n(61663),z=n(57952),D=n(77535),L=n(30530),E=n(36899),S=n(42104),q=function(){var e=(0,r.A)(o().mark((function e(){var t,n,a,r,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:5,n=c.length>1?c[1]:void 0,e.next=4,E.e.request(S.ev,{limit:t,userId:n});case 4:return a=e.sent,r=a.topReaderBadge,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.A)(o().mark((function e(t){var n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.e.request(S.k0,{id:t});case 2:return n=e.sent,a=n.topReaderBadgeById,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=n(68390);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var M=function(e){var t,n=e.limit,a=void 0===n?5:n,c=e.user,l=e.badgeId,i=(0,D.I)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,f.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({queryKey:(0,L.$h)(L.jZ.TopReaderBadge,c,null!=l?l:"latest:".concat(a)),queryFn:(t=(0,r.A)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}return e.next=3,G(l);case 3:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 5:return e.abrupt("return",q(a,c.id));case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),staleTime:L.b2.OneHour},V.e_));return{data:i.data,isPending:i.isPending}},U=n(74689),X=l.createElement;const _=function(e){var t,n=e.onRequestClose,c=e.onAfterOpen,i=e.onAfterClose,f=e.badgeId,A=e.origin,m=(0,g.Z2)().user,v=(0,I.DX)().logEvent,b=(0,B.G6)(B.bh.MobileL),y=M({user:m,limit:1,badgeId:f}).data,h=null==y?void 0:y[0],w=(0,u.n)({mutationFn:P}),x=w.mutateAsync,k=w.isPending,R=(0,l.useCallback)((function(e){v({event_name:e,target_type:z.yK.Badge,target_id:z.TB.TopReader,extra:JSON.stringify({tag:h.keyword.value,origin:A})})}),[v,A,null==h||null===(t=h.keyword)||void 0===t?void 0:t.value]),D=(0,l.useCallback)((0,r.A)(o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:return n=(0,O.Yq)({value:h.issuedAt,type:O.pT.TopReaderBadge}),a=(null===(t=h.keyword.flags)||void 0===t?void 0:t.title)||h.keyword.value,e.next=6,x({url:h.image,filename:"".concat(n," Top Reader in ").concat(a,".png")});case 6:R(z.VB.TopReaderBadgeDownload);case 7:case"end":return e.stop()}}),e)}))),[R,x,h]);return h?X(d.aF,(0,a.A)({},e,{size:p.rI.Small,isDrawerOnMobile:!0,onAfterClose:function(){R(z.VB.TopReaderModalClose),null==i||i()},onAfterOpen:function(){R(z.VB.Impression),null==c||c()}}),X(d.aF.Body,{className:"flex flex-col items-center justify-center gap-4 text-center"},X(U.O,{top:"2",onClick:n}),X("h1",{className:"font-bold typo-title1"},"You've earned the top reader badge!"),X(C,{user:m,keyword:h.keyword,issuedAt:h.issuedAt}),X(N.$n,{className:s()("w-full",!b&&"max-w-80"),variant:T.Ak.Primary,icon:X(j.s,{secondary:!0}),disabled:!h.image,loading:k,onClick:function(){return D()}},"Download badge"))):null}}}]);