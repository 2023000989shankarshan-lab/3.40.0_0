"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[7344],{26391:(e,t,r)=>{r.r(t),r.d(t,{default:()=>re});var o=r(33998),n=r(21441),a=r(34900),l=r(22155),s=r(95974),i=r(94198),c=r(67380),u=r(48389),m=r(53823),p=r(83448),d=r(17631),f=r(36780),v=l.createElement;function b(e){var t=e.onApprove,r=e.onReject,o=e.isLoading;return v("div",{className:"flex w-full flex-row gap-4"},v(m.$n,{size:p.Mp.Small,className:"flex-1",disabled:o,variant:p.Ak.Float,icon:v(d.t,null),onClick:r},"Decline"),v(m.$n,{size:p.Mp.Small,className:"flex-1",disabled:o,variant:p.Ak.Primary,icon:v(f.w,{secondary:!0}),onClick:t},"Approve"))}var h=r(56697),y=r(23879),g=r(97894),P=r(87822),x=r(57952),w=r(76179),N=r(61231),A=r(37774),k=r(84682),O=r(74689),S=r(35001),j=r(13318),E=r.n(j),R=r(80446),F=r(61773),D=r(75472),C=r(60471),T=r(27840),q=r(75487),L=l.createElement,z=function(e){var t=e.id,r=e.onDelete,o=(0,T.k)().showPrompt,n=(0,R.useRouter)(),a=function(){var e=(0,S.A)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({title:"Delete post",description:"Are you sure you want to delete this post?"});case 2:e.sent&&r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=[{label:"Edit post",action:function(){return n.push("/posts/".concat(t,"/edit?moderation=true"))},icon:L(F.q,{"aria-hidden":!0})},{label:"Delete post",action:a,icon:L(D.u,{"aria-hidden":!0})}];return L(q.rI,null,L(q.ty,{asChild:!0},L(m.$n,{variant:p.Ak.Tertiary,className:"z-1 my-0",icon:L(C.Z,null),size:p.Mp.Small})),L(q.SQ,null,L(q.x3,{options:l})))},H=r(5698),I=r(80009),M=r(89883),W=r(77955),K=r(68392),B=r(30530),V=r(61663),$=r(11924),_=r(80244),G=[{value:u.tP.OffTopic,label:"Off-topic post unrelated to the Squad"},{value:u.tP.Violation,label:"Violates the Squad's code of conduct"},{value:u.tP.Promotional,label:"Too promotional without adding value"},{value:u.tP.Duplicate,label:"Duplicate or similar content already posted"},{value:u.tP.LowQuality,label:"Lacks quality or clarity"},{value:u.tP.NSFW,label:"Inappropriate, NSFW or offensive post"},{value:u.tP.Spam,label:"Post is spam or scam"},{value:u.tP.Misinformation,label:"Contains misleading or false information"},{value:u.tP.Copyright,label:"Copyright or privacy violation"},{value:u.tP.Other,label:"Other"}],Q=function(e){return e.map((function(e){return{id:e.id,source:e.source,type:e.type,image:e.image,commentsPermalink:"",author:e.createdBy,createdAt:e.createdAt}}))},Z=r(38638),X=r(27504),Y=r(76800),U=["onApprove","onReject","data","squad"],J=l.createElement;function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const re=function(e){var t,r,n,m,p,d,f,v,j,R,F,D,C,q,L,ee,re,oe,ne=e.onApprove,ae=e.onReject,le=e.data,se=e.squad,ie=(0,a.A)(e,U),ce=le.id,ue=le.post,me=le.createdAt,pe=le.createdBy,de=le.image,fe=le.title,ve=le.titleHtml,be=le.content,he=le.contentHtml,ye=le.sharedPost,ge=le.source,Pe=le.externalLink,xe=(0,w.a)({origin:x.$e.ArticleModal,post:ye}),we=(0,u.pZ)(se,P.Wk.ModeratePost),Ne=(t=(0,M.d)(),r=t.openModal,n=t.closeModal,m=(0,K.mu)().displayToast,p=(0,T.k)().showPrompt,d=(0,V.DX)().logEvent,f=(0,_.Z2)().user,v=(0,H.jE)(),j=(0,B.$h)(B.jZ.SquadPostRequests,f),R=(0,I.n)({mutationFn:function(e){var t=e.postIds;return(0,u.Nu)(t)},onSuccess:function(e){m("Post(s) approved successfully"),v.invalidateQueries({queryKey:j}),Q(e).forEach((function(e){d((0,$.P5)(x.VB.ApprovePost,e))}))},onError:function(e,t){t.postIds.length>50?m("Failed to approve post(s). Please approve maximum 50 posts at a time"):m("Failed to approve post(s)")}}),F=R.mutateAsync,D=R.isPending,C=R.isSuccess,q=(0,l.useCallback)(function(){var e=(0,S.A)(E().mark((function e(t,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.length){e.next=4;break}return e.next=3,F({postIds:t,sourceId:r});case 3:return e.abrupt("return");case 4:return e.next=6,p({title:"Approve all ".concat(t.length," posts?"),description:"This action cannot be undone.",okButton:{title:"Yes, Approve all"}});case 6:if(!e.sent){e.next=10;break}return e.next=10,F({postIds:t,sourceId:r});case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[F,p]),L=(0,I.n)({mutationFn:function(e){return(0,u.NU)(e)},onSuccess:function(e){m("Post(s) declined successfully"),v.invalidateQueries({queryKey:j}),Q(e).forEach((function(e){d((0,$.P5)(x.VB.RejectPost,e))}))},onError:function(){m("Failed to decline post(s)")}}),ee=L.mutateAsync,re=L.isPending,oe=L.isSuccess,{isSuccess:C||oe,isPending:D||re,onApprove:q,onReject:(0,l.useCallback)((function(e,t){r({type:W.K2.ReasonSelection,props:{onReport:function(r,o,a){return ee({postIds:[e],sourceId:t,reason:o,note:a}).then(n)},reasons:G,heading:"Select a reason for declining"}})}),[n,ee,r]),onDelete:(0,I.n)({mutationFn:function(e){return(0,u.gT)(e)},onSuccess:function(){m("Post deleted successfully"),v.invalidateQueries({queryKey:j})},onError:function(){m("Failed to delete post")}}).mutateAsync}).onDelete;return J(i.aF,(0,o.A)({},ie,{size:i.aF.Size.Large,kind:i.aF.Kind.FlexibleTop,className:"tablet:max-h-[calc(100vh-5rem)]"}),J(i.aF.Body,{className:"gap-6 !p-6"},we&&J(b,{onReject:function(){return ae([ce],ge.id)},onApprove:function(){return ne([ce],ge.id)}}),J("div",{className:"flex flex-row items-center justify-between"},J(c.o5,{bold:!0,className:"flex-1",tag:c.UL.H3,truncate:!0,type:c.kR.Title3},"Post preview"),!we&&J(z,{id:ce,onDelete:function(e){return Ne(e).then((function(){return ie.onRequestClose(null)}))}}),J(O.O,{className:"!flex",onClick:ie.onRequestClose,position:"relative",right:"0"})),J(h.A,{post:te(te({},ue),{},{source:se}),showActions:!1,size:Z.Ov.Small}),J(y.A,{author:pe,date:me}),J(N.W,{title:fe||(null==ue?void 0:ue.title),titleHtml:ve||(null==ue?void 0:ue.titleHtml)}),!ye&&(de||(null==ue?void 0:ue.image))&&J(X.A,{condition:!!Pe,wrapper:function(e){return J(s.A,{href:Pe},J("a",{target:"_blank",rel:Y.O8},e))}},J(k.$,{imgSrc:de||(null==ue?void 0:ue.image)})),!(null==he||!he.length)&&J(A.A,{className:"!mt-0",content:he}),!(null!=he&&he.length)&&!(null==be||!be.length)&&J(c.o5,{type:c.kR.Body},be),ye&&J("div",{className:"-mt-8"},J(g.a,{source:se,sharedPost:ye,onReadArticle:xe}))))}},84682:(e,t,r)=>{r.d(t,{$:()=>f,A:()=>v});var o=r(22155),n=r(30395),a=r.n(n),l=r(95974),s=r(56607),i=r(37774),c=r(71992),u=r(16763),m=r(39762),p=r(47375),d=o.createElement,f=function(e){var t=e.imgSrc,r=e.className;return d("div",{className:a()("block h-fit max-w-sm cursor-pointer overflow-hidden rounded-16",r)},d(c.o,{imgSrc:t,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:u.uC}))};const v=function(e){var t,r=e.post,n=(0,m.Z)(r).title,a=!(null===(t=r.flags)||void 0===t||!t.coverVideo);return d(o.Fragment,null,d("div",{className:"my-6"},d("h1",{className:"whitespace-pre-line text-[2rem] font-bold leading-[1.3]"},n),r.clickbaitTitleDetected&&d(p.O,{post:r})),r.type===s.xj.Freeform&&d(o.Fragment,null,!a&&!!r.image&&d(l.A,{href:r.image},d("a",{target:"_blank",rel:"noopener noreferrer"},d(c.o,{eager:!1,fetchPriority:"low",ratio:"52%",imgSrc:r.image,imgAlt:"Post cover image",className:"mb-10 h-auto max-h-[62.5rem] w-full rounded-12 object-cover",fallbackSrc:u.uC}))),a&&d(c.Y,{eager:!0,ratio:"52%",videoSrc:r.flags.coverVideo,poster:r.image,className:"mb-10 h-auto max-h-[62.5rem] w-full rounded-12 object-cover"})),d(i.A,{content:r.contentHtml,className:r.type!==s.xj.Welcome&&"mb-5"}),r.type===s.xj.Welcome&&r.image&&d(f,{imgSrc:r.image,className:"mb-5 mt-8"}))}},97894:(e,t,r)=>{r.d(t,{A:()=>D,a:()=>F});var o=r(33998),n=r(22155),a=r(30395),l=r.n(a),s=r(56697),i=r(3957),c=r(55059),u=r(52045),m=r(12430),p=r(24122),d=r(14721),f=r(83448),v=r(9062),b=r(38638),h=r(16714),y=r(71992),g=r(16763),P=r(61231),x=r(17631),w=r(75570),N=r(67380),A=r(54883),k=r(97838),O=r(87822),S=n.createElement,j=function(){return S(n.Fragment,null,S(v._,{className:"mt-6 h-6 w-2/4 rounded-10"}),S("div",{className:"mb-5 mt-8 rounded-16 border border-border-subtlest-tertiary"},S("div",{className:"flex max-w-full flex-col p-4 pt-5 laptop:flex-row"},S("div",{className:"flex flex-1 flex-col gap-9"},S(v._,{className:"h-6 w-20 rounded-10"}),S(v._,{className:"h-6 w-20 rounded-10"})),S(v._,{className:"ml-2 h-36 w-70 rounded-16"}))))},E=function(){return S(p.N,{className:"mb-5 mt-8"},S("div",{className:"flex flex-row items-center gap-1 px-5 py-4"},S(x.t,null),S(N.o5,{className:"flex-1",type:N.kR.Subhead,color:N.X8.Secondary},"This post is no longer available. It might have been removed or the link has expired.")))},R=function(e){var t=e.post,r=e.openArticle;return S(p.N,{className:"mb-5 mt-8"},S("div",{className:"flex flex-row items-center gap-1 px-5 py-4"},S("div",{className:"flex size-6 items-center justify-center rounded-full bg-surface-secondary"},S(w.O,{size:k.lK.Size16})),S(N.o5,{className:"flex-1",type:N.kR.Subhead,color:N.X8.Secondary},"This post is in a private squad."),S(i.l,(0,o.A)({content:(0,c.KN)(t),className:"w-fit",href:t.commentsPermalink,variant:f.Ak.Secondary,title:"Go to post",rel:"noopener"},(0,m.t)(r)))))};function F(e){var t=e.sharedPost,r=e.source,a=e.onReadArticle,v=(0,u.Mp)().sidebarExpanded,P=(0,n.useContext)(u.Ay).openNewTab,x=function(e){e.stopPropagation(),a()};if(!t)return S(j,null);var w=(0,c.aH)({sharedPost:t})||(0,c.LJ)(t),N=t.id===A.HR,k=t.private,F=t.source.type;return N?S(E,null):k&&F===O.Y1.Squad?S(R,{post:t,openArticle:x}):S(p.N,{post:t,summary:t.summary,className:"mb-5 mt-8"},S("div",{className:l()("flex max-w-full flex-col gap-2 p-4 pt-5",v?"laptopL:flex-row":"laptop:flex-row")},S("div",{className:l()("mb-5 flex max-w-full flex-1 flex-col truncate",v?"laptopL:mb-0":"laptop:mb-0")},S(d.i,{source:r,sharedPost:t,onGoToLinkProps:(0,m.t)(x),className:"mb-4 mt-0 flex flex-wrap font-bold typo-body"},S(h.mE,null,t.title)),S(s.A,{date:t.readTime?"".concat(t.readTime,"m read time"):void 0,post:t,onReadArticle:a,size:b.Ov.Small,showActions:!1}),S(i.l,(0,o.A)({content:(0,c.KN)(t),className:"mt-5 w-fit",variant:f.Ak.Secondary,href:w?t.commentsPermalink:t.permalink,openNewTab:!w&&P,title:"Go to post",rel:"noopener"},(0,m.t)(x)))),S(d.i,{source:r,sharedPost:t,onGoToLinkProps:(0,m.t)(x),className:"mx-auto block h-fit w-70 cursor-pointer overflow-hidden rounded-16"},S(y.o,{imgSrc:t.image,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:g.uC,fetchPriority:"high"}))))}const D=function(e){var t=e.post,r=e.onReadArticle;return S(n.Fragment,null,S(P.W,{title:null==t?void 0:t.title,titleHtml:null==t?void 0:t.titleHtml}),S(F,{onReadArticle:r,source:t.source,sharedPost:t.sharedPost}))}},24122:(e,t,r)=>{r.d(t,{N:()=>i});var o=r(22155),n=r(30395),a=r.n(n),l=r(69366),s=o.createElement;function i(e){var t=e.children,r=e.post,o=e.summary,n=e.className,i=e.Wrapper,c=null!=r&&r.summary?s("div",{className:"px-4"},s(l.u,{post:r,isContainedView:!0})):null;return s("div",{className:a()("flex flex-col rounded-16 border border-border-subtlest-tertiary hover:border-border-subtlest-secondary",n)},t,i&&o?s(i,null,c):c)}},14721:(e,t,r)=>{r.d(t,{i:()=>m});var o=r(33998),n=r(21441),a=r(34900),l=r(22155),s=r(95974),i=["href","as"],c=l.createElement;function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}var m=function(e){var t=e.sharedPost,r=e.source,l=e.className,m=e.children,p=e.onGoToLinkProps,d="unknown"===t.source.id?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({href:t.permalink,target:"_blank",rel:"noopener",as:void 0},p):{href:"".concat(t.commentsPermalink,"?squad=").concat(r.handle,"&n=").concat(r.name),as:t.commentsPermalink},f=d.href,v=d.as,b=(0,a.A)(d,i);return c(s.A,{href:f,as:v},c("a",(0,o.A)({},b,{className:l}),m))}},61231:(e,t,r)=>{r.d(t,{W:()=>l});var o=r(22155),n=r(37774),a=o.createElement;function l(e){var t=e.title,r=e.titleHtml;return t?r?a(n.A,{className:"mt-6",content:r}):a("p",{className:"mt-6 whitespace-pre-line typo-title3"},t):null}}}]);