(self.webpackChunkextension=self.webpackChunkextension||[]).push([[8440],{85057:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var r=n(33998),i=n(22155),a=n(13706),o=n.n(a),u=n(94198),l=n(68390),c=n(72046),d=n(72870),s=n(74689),v=n(89883),p=n(22640),f=n(65323),m=n(61663),g=n(57952),y=n(77955),h=i.createElement,C=o()((function(){return n.e(1394).then(n.bind(n,3059))}),{loadableGenerated:{webpack:function(){return[3059]}}}),k=o()((function(){return Promise.all([n.e(9170),n.e(9536),n.e(1278)]).then(n.bind(n,35791))}),{loadableGenerated:{webpack:function(){return[35791]}}}),_=o()((function(){return Promise.all([n.e(9170),n.e(9536),n.e(6656)]).then(n.bind(n,9447))}),{loadableGenerated:{webpack:function(){return[9447]}}}),b=o()((function(){return Promise.all([n.e(9170),n.e(9536),n.e(354)]).then(n.bind(n,36691)).then((function(e){return e.PlusIOS}))}),{loadableGenerated:{webpack:function(){return[36691]}}});const E=function(e){var t=(0,c.o)(),n=t.getMarketingCta,a=t.clearMarketingCta,o=(n(f.WA.Plus)||{}).campaignId,E=(0,m.DX)().logEvent,P=(0,v.d)().closeModal,O=(0,l.oX)(),T=(0,d.G6)(d.bh.Tablet),I=function(){E({event_name:g.VB.MarketingCtaDismiss,target_type:g.yK.MarketingCtaPlus,target_id:o}),P(),a(o)},N=(0,i.useMemo)((function(){return(0,l.Ji)()?h(b,{showModalSection:!0}):h(O?k:_,null)}),[O]);return T?h(p.P,null,h(u.aF,(0,r.A)({size:y.rI.XLarge,className:"flex-1 overflow-x-hidden !bg-background-default"},e,{onRequestClose:I}),h(u.aF.Body,{className:"!p-0"},h(s.O,{onClick:I,top:"4"}),N))):h(C,(0,r.A)({onClose:I},e))}},20573:(e,t,n)=>{"use strict";n.d(t,{P5:()=>a,Qv:()=>i,Tg:()=>u});var r=n(22155),i=(0,r.createContext)(void 0),a=function(){var e=(0,r.useContext)(i);if(void 0===e)throw new Error("usePaymentContext must be used within a PaymentContextProvider");return e},o=(0,r.createContext)({pricing:null}),u=function(){return(0,r.useContext)(o)}},22640:(e,t,n)=>{"use strict";n.d(t,{P:()=>I});var r=n(34900),i=n(22155),a=n(13706),o=n.n(a),u=n(68390),l=n(89334),c=n(20573),d=n(83362),s=n(16354),v=n(77535),p=n(80244),f=n(30530),m=i.createElement,g=function(e){var t,n=e.children,r=e.openCheckout,a=e.isPaddleReady,o=e.checkoutItemsLoading,u=e.priceType,l=e.setPriceType,g=(0,p.Z2)().isValidRegion,y=(null!==(t=(0,c.Tg)())&&void 0!==t?t:{}).pricing,h=function(e){var t=e.type,n=e.enabled,r=void 0===n||n,i=(0,p.Z2)(),a=i.user,o=i.isValidRegion;return(0,v.I)({queryKey:(0,f.$h)(f.jZ.PricePreview,a,t),queryFn:function(){return(0,d.Ju)(t)},enabled:r&&o,staleTime:f.b2.Default})}({type:u,enabled:!(null!=y&&y.length)}),C=h.data,k=h.isPending,_=null!=y&&y.length?y:C,b=(0,i.useMemo)((function(){return null==_?void 0:_.find((function(e){return e.metadata.appsId===s.lL.GiftOneYear}))}),[_]),E=u===d.sE.Organization,P=(0,i.useMemo)((function(){var e;return{openCheckout:r,productOptions:null!==(e=null==_?void 0:_.filter((function(e){return e.priceId!==(null==b?void 0:b.priceId)})))&&void 0!==e?e:[],isPlusAvailable:g,giftOneYear:b,isPricesPending:k,isPaddleReady:a,isOrganization:E,checkoutItemsLoading:o,priceType:u,setPriceType:l}}),[r,_,b,g,k,a,E,o,u,l]);return m(c.Qv.Provider,{value:P},n)},y=i.createElement,h=function(e){var t=e.children,n=e.successCallback,r=e.disabledEvents,a=e.initialPriceType,o=void 0===a?d.sE.Plus:a,u=(0,i.useState)(o),c=u[0],s=u[1],v=(0,l.W)({successCallback:n,disabledEvents:r,priceType:c}),p=v.openCheckout,f=v.isPaddleReady,m=v.checkoutItemsLoading;return y(g,{openCheckout:p,isPaddleReady:f,checkoutItemsLoading:m,priceType:c,setPriceType:s},t)},C=n(80446),k=n(54883),_=i.createElement,b=function(e){var t=e.children,n=(0,C.useRouter)();return _(g,{openCheckout:function(e){var t=e.priceId,r=e.giftToUserId,i=e.discountId,a=new URLSearchParams({priceId:t});r&&a.append("giftToUserId",r),i&&a.append("discountId",i);var o=new URL("".concat(k.ZO,"plus/payment?").concat(a.toString()));n.push(o.toString())},priceType:d.sE.Plus},t)},E=n(63815),P=["children"],O=i.createElement,T=o()((function(){return n.e(4281).then(n.bind(n,74281)).then((function(e){return e.StoreKitSubProvider}))}),{loadableGenerated:{webpack:function(){return[74281]}}}),I=function(e){var t=e.children,n=(0,r.A)(e,P);return(0,E.B6)()?O(T,n,t):(0,u.oX)()?O(b,n,t):O(h,n,t)}},89334:(e,t,n)=>{"use strict";n.d(t,{W:()=>m});var r=n(21441),i=n(22155),a=n(15132),o=n(80446),u=n(80244),l=n(61663),c=n(57952),d=n(54883),s=n(68390),v=n(83362);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t,n=e.successCallback,r=e.disabledEvents,p=e.priceType,m=e.getProductQuantity,g=c.E4[p],y=(0,o.useRouter)(),h=(0,l.DX)().logEvent,C=(0,u.Z2)(),k=C.user,_=C.geo,b=C.trackingId,E=(0,i.useState)(),P=E[0],O=E[1],T=(0,i.useRef)(!1),I=(0,i.useState)(!1),N=I[0],S=I[1],w=(0,i.useRef)();w.current=h;var D=(0,i.useRef)(n);D.current=n;var R=(0,i.useRef)(m);R.current=m;var x=null===(t=y.query)||void 0===t?void 0:t.d_id,L=p===v.sE.Organization,M=p===v.sE.Plus||L;(0,i.useEffect)((function(){(0,s.oX)()||(T.current=!1,(0,a.initializePaddle)({environment:"MISSING_ENV_VAR".NEXT_PUBLIC_PADDLE_ENVIRONMENT||"production",token:"test_4194076987e44d19d7e0c3388d6",eventCallback:function(e){var t,n,i,o,u,l,s,p;if(null!=r&&r.includes(null==e?void 0:e.name))(null==e?void 0:e.name)===a.CheckoutEventNames.CHECKOUT_LOADED&&(T.current=!0);else{var m=(null==e||null===(t=e.data)||void 0===t?void 0:t.custom_data)||{},h=M?{plan_type:L?v.KJ.Organization:v.KJ.Personal,team_size:null==e||null===(n=e.data)||void 0===n||null===(n=n.items)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.quantity}:void 0;switch(null==e?void 0:e.name){case a.CheckoutEventNames.CHECKOUT_PAYMENT_INITIATED:w.current({target_type:g,event_name:c.VB.InitiatePayment,target_id:null==e||null===(i=e.data)||void 0===i?void 0:i.payment.method_details.type,extra:JSON.stringify(f({},h))});break;case a.CheckoutEventNames.CHECKOUT_LOADED:T.current=!0,w.current({target_type:g,event_name:c.VB.InitiateCheckout,target_id:null==e||null===(o=e.data)||void 0===o?void 0:o.payment.method_details.type,extra:JSON.stringify(f({},h))});break;case a.CheckoutEventNames.CHECKOUT_PAYMENT_SELECTED:w.current({target_type:g,event_name:c.VB.SelectCheckoutPayment,target_id:null==e||null===(u=e.data)||void 0===u?void 0:u.payment.method_details.type,extra:JSON.stringify(f({},h))});break;case a.CheckoutEventNames.CHECKOUT_COMPLETED:T.current=!1,w.current({target_type:g,event_name:c.VB.CompleteCheckout,extra:JSON.stringify(f({user_id:"gifter_id"in m&&"user_id"in m?m.user_id:void 0,quantity:null===(l=R.current)||void 0===l?void 0:l.call(R,e),localCost:null==e?void 0:e.data.totals.total,localCurrency:null==e?void 0:e.data.currency_code,payment:null==e?void 0:e.data.payment.method_details.type,cycle:null!==(s=null==e||null===(p=e.data.items)||void 0===p||null===(p=p[0])||void 0===p||null===(p=p.billing_cycle)||void 0===p?void 0:p.interval)&&void 0!==s?s:"one-off"},h))}),D.current?D.current(e):y.push(d.j$);break;case"checkout.warning":w.current({target_type:g,event_name:c.VB.WarningCheckout,extra:JSON.stringify({transaction_id:null==e?void 0:e.data.transaction_id})});break;case a.CheckoutEventNames.CHECKOUT_ERROR:w.current({target_type:g,event_name:c.VB.ErrorCheckout,extra:JSON.stringify({transaction_id:null==e?void 0:e.data.transaction_id})});break;case a.CheckoutEventNames.CHECKOUT_PAYMENT_FAILED:w.current({target_type:g,event_name:c.VB.ErrorPayment,extra:JSON.stringify({transaction_id:null==e?void 0:e.data.transaction_id})});break;case a.CheckoutEventNames.CHECKOUT_CLOSED:T.current=!1;break;case a.CheckoutEventNames.CHECKOUT_ITEMS_UPDATED:S(!1)}}},checkout:{settings:{displayMode:"inline",frameTarget:"checkout-container",frameInitialHeight:500,frameStyle:"width: 100%; background-color: transparent; border: none;",theme:"dark",variant:"one-page"}}}).then((function(e){e&&O(e)})))}),[y,r,g,L,M]);var A=(0,i.useCallback)((function(e){var t=e.priceId,n=e.giftToUserId,r=e.discountId,i=e.quantity,a=[{priceId:t,quantity:void 0===i?1:i}],o=f(f({},null!=k&&k.email?{email:null==k?void 0:k.email}:{id:"anonymous"}),(null==_?void 0:_.region)&&{address:{countryCode:null==_?void 0:_.region}}),u=f({user_id:null!=n?n:null==k?void 0:k.id,tracking_id:b},!!n&&{gifter_id:null==k?void 0:k.id});if(T.current)return S(!0),void(null==P||P.Checkout.updateItems(a));null==P||P.Checkout.open({items:a,customer:o,customData:u,discountId:x||r})}),[null==P?void 0:P.Checkout,null==k?void 0:k.email,null==k?void 0:k.id,null==_?void 0:_.region,b,x]);return{paddle:P,openCheckout:A,isPaddleReady:!!P,checkoutItemsLoading:N}}},15132:()=>{}}]);