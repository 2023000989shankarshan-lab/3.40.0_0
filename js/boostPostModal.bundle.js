"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[4257,8853],{38792:(e,t,a)=>{a.r(t),a.d(t,{ActionSuccessModal:()=>m});var n=a(33998),r=a(34900),o=a(22155),l=a(53823),s=a(83448),i=a(67380),c=a(94198),u=a(74689),d=a(72870),p=a(41536),f=["cta","secondaryCta","content","withCloseOnTablet"],y=o.createElement;function m(e){var t=e.cta,a=e.secondaryCta,o=e.content,m=e.withCloseOnTablet,b=(0,r.A)(e,f),h=o.title,v=o.description,g=o.body,C=o.cover,O=o.coverDrawer,S=(0,d.G6)(d.bh.Tablet),k=S?C:O||C;return y(c.aF,(0,n.A)({size:c.aF.Size.Small,kind:c.aF.Kind.FixedCenter},b,{isOpen:!0,isDrawerOnMobile:!0}),y(c.aF.Body,{className:"flex flex-col gap-3 py-1 tablet:!p-4"},y("div",{className:"relative flex flex-row overflow-hidden rounded-16"},y(u.O,{className:"hidden tablet:flex",right:"2",top:"2",size:s.Mp.Small,onClick:b.onRequestClose,variant:s.Ak.Primary}),k&&y("div",{className:"relative h-full max-h-56 min-h-52 w-full"},y(p._V,{className:"absolute",src:k,alt:"Success"}))),y("div",{className:"mt-2 flex flex-col gap-2"},y(i.o5,{type:b.size===c.aF.Size.XSmall?i.kR.Title3:i.kR.Title2,center:!0,bold:!0},h),y(i.o5,{type:i.kR.Body,color:S?i.X8.Secondary:i.X8.Tertiary,center:!0},v)),g,t&&y(l.$n,(0,n.A)({variant:s.Ak.Primary,className:"w-full",type:"button"},t),t.copy),a&&y(l.$n,(0,n.A)({variant:s.Ak.Float,className:"w-full",type:"button"},a),a.copy),m&&y(l.$n,{variant:s.Ak.Float,className:"hidden w-full tablet:flex",type:"button",onClick:b.onRequestClose},"Close")))}},68024:(e,t,a)=>{a.r(t),a.d(t,{BoostPostModal:()=>L,default:()=>Y});var n=a(33998),r=a(21441),o=a(56594),l=a(34900),s=a(13706),i=a.n(s),c=a(22155),u=a(5698),d=a(94198),p=a(67380),f=a(53823),y=a(83448),m=a(80244),b=a(96888),h=a(60665),v=a(41536),g=a(81602),C=a(97838),O=a(57952),S=a(12602),k=a(43492),x=a(69790),w=a(89883),P=a(77955),R=a(38792),A=a(16763),j=a(54883),F=a(34229),N=a(30794),B=a(7547),D=a(55059),E=a(81565),T=a(34808),M=a(46856),K=a(68506),$=function(e){var t,a,n=e.post,r=e.query,o=(0,c.useMemo)((function(){return(0,M.UM)(5*E.xP,new Date(n.createdAt))}),[n.createdAt]),l=(0,c.useState)(!1),s=l[0],i=l[1],u=(0,c.useState)(n),d=u[0],p=u[1],f=!(null===(t=d.tags)||void 0===t||!t.length)||!(null===(a=d.sharedPost)||void 0===a||null===(a=a.tags)||void 0===a||!a.length),y=o||f||!!d.yggdrasilId||s,m=(0,K.$)({type:B.pR.Post,query:r,referenceId:d.id,enabled:y}),b=m.estimatedReach,h=m.isLoading,v=m.isFetched;return(0,T.QU)({id:d.id,options:{enabled:!y,refetchInterval:function(e){if(Math.max(e.state.dataUpdateCount,e.state.fetchFailureCount)>1e3*E.xP/2/D.nX)return i(!0),!1;var t=e.state.data;return null!=t&&t.post.yggdrasilId?(p(t.post),!1):D.L0}}}),{estimatedReach:b,isLoading:h,isFetched:v,canBoost:y}},q=a(30530),U=["post"],I=c.createElement;function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){(0,r.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z=i()((function(){return a.e(2168).then(a.bind(a,62168)).then((function(e){return e.Slider}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[62168]}}}),_={FORM:"FORM",BUY_CORES:"BUY_CORES",SUCCESS:"SUCCESS"};function L(e){var t,a,r=e.post,s=(0,l.A)(e,U),i=(0,m.Z2)().user,D=(0,w.d)().openModal,E=(0,u.jE)(),T=(0,c.useState)(_.FORM),M=T[0],K=T[1],X=c.useState(B.c1),L=(0,o.A)(X,2),Y=L[0],V=L[1],Q=c.useState(B.rC),G=(0,o.A)(Q,2),J=G[0],H=G[1],W=(0,c.useState)({coresPerDay:Y,totalDays:J}),ee=W[0],te=W[1],ae=(0,F.A)(te,400),ne=(0,o.A)(ae,1)[0],re=Y*J,oe=(0,g.Kt)(re),le=$({post:r,query:{budget:ee.coresPerDay}}),se=le.estimatedReach,ie=le.canBoost,ce=le.isLoading,ue=(0,x.P)({onBoostSuccess:function(e,t){e.referenceId&&(0,q.kh)(E,t.value,(function(t){return{flags:Z(Z({},t.flags),{},{campaignId:e.referenceId})}})),K(_.SUCCESS)}}).onStartBoost,de=(0,k.r)(r);if(M===_.BUY_CORES)return I(S.IA,{isOpen:!0,product:null,onCompletion:function(){return K(_.FORM)},onRequestClose:function(){return K(_.FORM)},amountNeededCopy:I(p.o5,{type:p.kR.Callout,color:p.X8.Secondary},"You need"," ",I("strong",null,Math.abs(i.balance.amount-re).toLocaleString()," ","more Cores")," ","to boost the post."),origin:O.$e.BoostPost});if(M===_.SUCCESS)return I(R.ActionSuccessModal,(0,n.A)({},s,{cta:{copy:"Ads dashboard",onClick:function(){return D({type:P.K2.AdsDashboard})}},secondaryCta:{copy:"Learn more about boosting",tag:"a",href:j.ZZ,target:"_blank"},content:{title:"Post boosted successfully!",description:"Your post is now being promoted and will start reaching more developers shortly. You can track its performance anytime from the ads dashboard.",cover:A.Gh}}));var pe=Math.max(se.min,se.max),fe=function(){if(ce||!ie)return I(N.a,{"data-testid":"loader"});var e=(0,g.Kt)(se.min),t=(0,g.Kt)(pe);return"".concat(e," - ").concat(t)}();return I(d.aF,(0,n.A)({},s,{isOpen:!0,shouldCloseOnOverlayClick:!1,kind:d.aF.Kind.FixedCenter,size:d.aF.Size.Small}),I(d.aF.Header,{className:"items-center"},I(p.o5,{type:p.kR.Title3,bold:!0},"Boost your post"),I("div",{className:"ml-4 flex flex-row rounded-10 bg-surface-float"},I(f.$n,{icon:I(b.t,null),size:y.Mp.Small,variant:y.Ak.Tertiary,target:"_blank",href:j.JY,tag:"a"},(0,g.Kt)(i.balance.amount)),I("div",{className:"my-1 border-l border-border-subtlest-tertiary"}),I(f.$n,{icon:I(h.c,null),size:y.Mp.Small,variant:y.Ak.Tertiary,onClick:function(){return K("BUY_CORES")}}))),I(d.aF.Body,{className:"flex flex-col !gap-6"},I(p.o5,{type:p.kR.Callout,color:p.X8.Secondary},"Give your content the spotlight it deserves. Our auto-targeting engine ensures your post gets shown to the developers most likely to care.",I("a",{href:j.ZZ,className:"ml-1 text-text-link",target:"_blank"},"Learn more")),I("div",{className:"rounded-16 bg-surface-float"},I("div",{className:"flex flex-row items-center gap-5 p-2"},I(p.o5,{type:p.kR.Callout,className:"ml-2 line-clamp-2 flex-1"},null!==(t=r.title)&&void 0!==t?t:null===(a=r.sharedPost)||void 0===a?void 0:a.title),de&&I(v._V,{className:"h-12 w-18 rounded-12",src:de})),I("div",{className:"flex flex-col items-center rounded-16 bg-surface-float p-3"},I(p.o5,{type:p.kR.Title3,bold:!0},oe," Cores over ",J," days"),I(p.o5,{type:p.kR.Callout,color:p.X8.Tertiary},"Total spend"),I(p.o5,{className:"mt-2 min-h-[1.375rem]",type:p.kR.Body},fe),I(p.o5,{type:p.kR.Callout,color:p.X8.Tertiary},"Estimated daily reach"))),I("div",{className:"flex flex-col"},I(p.o5,{type:p.kR.Callout,color:p.X8.Tertiary},"Budget"),I("span",{className:"flex items-center gap-2"},I(b.t,null),I(p.o5,{type:p.kR.Body,className:"flex items-center",bold:!0},(0,g.Kt)(Y||0)," Cores per day")),I(z,{className:"mt-2 w-full",min:1e3,max:1e5,step:1e3,defaultValue:[Y],onValueChange:function(e){var t=(0,o.A)(e,1)[0];ne((function(e){return Z(Z({},e),{},{coresPerDay:t})})),V(t)}}),I(p.o5,{className:"mt-4",type:p.kR.Callout,color:p.X8.Tertiary},"Duration"),I(p.o5,{type:p.kR.Body,bold:!0},J," days"),I(z,{className:"mt-2 w-full",min:1,max:30,step:1,defaultValue:[J],onValueChange:function(e){var t=(0,o.A)(e,1)[0];return H(t)}}))),I(d.aF.Footer,null,I(f.$n,{variant:y.Ak.Primary,className:"w-full",type:"button",onClick:function(){return i.balance.amount<re?K(_.BUY_CORES):ue({duration:J,budget:Y,value:r.id,type:B.pR.Post})},disabled:!ie||ce},"Boost post for ",I(b.t,{className:"mx-1",size:C.lK.Small}),oe)))}const Y=L},68506:(e,t,a)=>{a.d(t,{$:()=>i});var n=a(77535),r=a(7547),o=a(30530),l=a(80244),s={min:0,max:0},i=function(e){var t=e.type,a=e.query,i=e.enabled,c=void 0===i||i,u=e.referenceId,d=(0,l.Z2)().user,p=(0,o.$h)(o.jZ.Campaigns,d,"estimate",u,t,a),f=(0,n.I)({queryKey:p,queryFn:function(){return(0,r.RV)({type:t,value:u,budget:a.budget})},enabled:c,placeholderData:s,staleTime:o.b2.Default}),y=f.data,m=f.isPending,b=f.isRefetching,h=f.isFetched;return{estimatedReach:null!=y?y:s,isLoading:m||b,isFetched:h}}},69790:(e,t,a)=>{a.d(t,{P:()=>h});var n=a(35001),r=a(21441),o=a(13318),l=a.n(o),s=a(5698),i=a(80009),c=a(7547),u=a(30530),d=a(80244),p=a(68390),f=a(53304),y=a(68392);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,r.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.onBoostSuccess,r=t.onCancelSuccess,o=(0,s.jE)(),m=(0,y.mu)().displayToast,h=(0,d.Z2)(),v=h.user,g=h.updateUser,C=(0,i.n)({mutationFn:c.J,onSuccess:function(e,t){if(e.transactionId){var n=null==e?void 0:e.balance;(0,p.hX)(n)||g(b(b({},v),{},{balance:n})),o.invalidateQueries({queryKey:(0,u.$h)(u.jZ.Transactions,v),exact:!1}),o.invalidateQueries({queryKey:(0,u.$h)(u.jZ.Campaigns,v),exact:!1}),null==a||a(e,t)}},onError:(0,f.K)()}).mutateAsync,O=(0,i.n)({mutationFn:c.Jr,onSuccess:(e=(0,n.A)(l().mark((function e(t,a){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.transactionId){e.next=2;break}return e.abrupt("return");case 2:n=null==t?void 0:t.balance,(0,p.hX)(n)||g(b(b({},v),{},{balance:n})),o.invalidateQueries({queryKey:(0,u.$h)(u.jZ.Transactions,v),exact:!1}),o.invalidateQueries({queryKey:(0,u.$h)(u.jZ.Campaigns,v),exact:!1}),m("Post boost canceled!"),null==r||r(t,a);case 8:case"end":return e.stop()}}),e)}))),function(t,a){return e.apply(this,arguments)})});return{onStartBoost:C,onCancelBoost:O.mutateAsync,isLoadingCancel:O.isPending}}}}]);